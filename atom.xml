<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>一粒微尘</title>
  
  <subtitle>撷光以望，纳星于瞳</subtitle>
  <link href="https://blog.667408.xyz/atom.xml" rel="self"/>
  
  <link href="https://blog.667408.xyz/"/>
  <updated>2024-11-06T16:00:00.000Z</updated>
  <id>https://blog.667408.xyz/</id>
  
  <author>
    <name>微尘</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>使用 GitHub Actions 实现博客自动化部署2.0</title>
    <link href="https://blog.667408.xyz/posts/f59d6301.html"/>
    <id>https://blog.667408.xyz/posts/f59d6301.html</id>
    <published>2024-11-04T16:00:00.000Z</published>
    <updated>2024-11-06T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>生成一个 github<a href="https://github.com/settings/tokens">tokens</a>  </li><li>保存一下，只显示一次<br><img src="https://img.667408.xyz/2024/11/06/039280.png" alt="039280.png"><br><img src="https://img.667408.xyz/2024/11/06/079630.png" alt="079630.png"></li></ul><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>新建一个 blog-anzhiyu 仓库（源码存放，后面改私库）</li><li>设置里面新增变量<br><img src="https://img.667408.xyz/2024/11/06/053894.png" alt="053894.png"><br><img src="https://img.667408.xyz/2024/11/06/148941.png" alt="148941.png"></li><li>再新建一个 blog-anzhiyu-Public（生成的静态文件）  </li><li><code>blog-anzhiyu</code> 中新建 <code>themes/anzhiyu/1</code>，</li><li><code>blog-anzhiyu</code> 中新建 <code>.github/workflows/main.yml</code><br><img src="https://img.667408.xyz/2024/11/06/580217.png" alt="580217.png"><br><img src="https://img.667408.xyz/2024/11/06/809218.png" alt="809218.png"></li><li>然后用客户端把库克隆到本地，把 <code>themes</code> 这个删除，<code>.github</code> 别删除，把你本地备份好的数据全丢进去，编辑一下 <code>.github/workflows/main.yml</code></li><li>搜索 <code>catxian/blog-anzhiyu-Public</code> 换成 <code>你自己</code> 的用户名和仓库名</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">name: 自动构建  </span><br><span class="line">  </span><br><span class="line">on:  </span><br><span class="line">  push:  </span><br><span class="line">    branches:  </span><br><span class="line">      - main  </span><br><span class="line">  </span><br><span class="line">jobs:  </span><br><span class="line">  deploy:  </span><br><span class="line">    runs-on: ubuntu-latest  </span><br><span class="line">    env:  </span><br><span class="line">      TZ: Asia/Shanghai  </span><br><span class="line">    steps:  </span><br><span class="line">    - name: 检查源仓库分支  </span><br><span class="line">      uses: actions/checkout@v3  </span><br><span class="line">      with:  </span><br><span class="line">        ref: main  </span><br><span class="line">        fetch-depth: 0  </span><br><span class="line">  </span><br><span class="line">    - name: 恢复文件修改时间  </span><br><span class="line">      run: |  </span><br><span class="line">        find source -name &#x27;*.md&#x27; | while read file; do  </span><br><span class="line">          touch -d &quot;$(git log -1 --format=&quot;@%ct&quot; &quot;$file&quot;)&quot; &quot;$file&quot;  </span><br><span class="line">        done  </span><br><span class="line">  </span><br><span class="line">    - name: 安装 Node.js  </span><br><span class="line">      uses: actions/setup-node@v3  </span><br><span class="line">      with:  </span><br><span class="line">        node-version: &quot;20.x&quot;  </span><br><span class="line">  </span><br><span class="line">    - name: 安装 Hexo  </span><br><span class="line">      run: |  </span><br><span class="line">        npm install -g hexo-cli  </span><br><span class="line">  </span><br><span class="line">    - name: 缓存 node 模块  </span><br><span class="line">      id: cache-node-modules  </span><br><span class="line">      uses: actions/cache@v3  </span><br><span class="line">      with:  </span><br><span class="line">        path: node_modules  </span><br><span class="line">        key: $&#123;&#123; runner.os &#125;&#125;-node-modules-$&#123;&#123; hashFiles(&#x27;**/package-lock.json&#x27;) &#125;&#125;  </span><br><span class="line">        restore-keys: |  </span><br><span class="line">          $&#123;&#123; runner.os &#125;&#125;-node-modules-  </span><br><span class="line">  </span><br><span class="line">    - name: 安装依赖  </span><br><span class="line">      if: steps.cache-node-modules.outputs.cache-hit != &#x27;true&#x27;  </span><br><span class="line">      run: |  </span><br><span class="line">        npm install --save  </span><br><span class="line">  </span><br><span class="line">    - name: 生成静态  </span><br><span class="line">      run: |  </span><br><span class="line">        node link.js</span><br><span class="line">        hexo generate  </span><br><span class="line">  </span><br><span class="line">    - name: 部署推送到目标仓库  </span><br><span class="line">      uses: peaceiris/actions-gh-pages@v3  </span><br><span class="line">      with:  </span><br><span class="line">        personal_token: $&#123;&#123; secrets.PAT &#125;&#125;  </span><br><span class="line">        publish_dir: ./public  </span><br><span class="line">        external_repository: catxian/blog-anzhiyu-Public  </span><br><span class="line">        user_name: &quot;github-actions[bot]&quot;  </span><br><span class="line">        user_email: &quot;github-actions[bot]@users.noreply.github.com&quot;  </span><br><span class="line">        full_commit_message: &quot;通过 Github Actions 部署 Hexo 构建&quot;  </span><br><span class="line">        publish_branch: main</span><br></pre></td></tr></table></figure><h1 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h1><ul><li>客户端直接把整个仓库上传上去<br><img src="https://img.667408.xyz/2024/11/02/888282.webp" alt="888282.webp"><br><img src="https://img.667408.xyz/2024/11/02/297469.webp" alt="297469.webp"></li></ul><h1 id="总结加感谢"><a href="#总结加感谢" class="headerlink" title="总结加感谢"></a>总结加感谢</h1><p>想部署到 cloudflare 还是 vercel 都可以<br><a href="https://ll.sc.cn/posts/10d9/">使用 Github Action 自动部署 Hexo 博客 | 雷雷的个人博客</a><br><a href="https://blog.bsgun.cn/posts/22714023/">本地推送Github Actions再推送到服务器 | 梦爱吃鱼</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;生成一个 github&lt;a href=&quot;https://github.com/settings/tokens&quot;&gt;toke</summary>
      
    
    
    
    
    <category term="Github" scheme="https://blog.667408.xyz/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>输入法分享</title>
    <link href="https://blog.667408.xyz/posts/95c6eb48.html"/>
    <id>https://blog.667408.xyz/posts/95c6eb48.html</id>
    <published>2024-11-04T16:00:00.000Z</published>
    <updated>2024-11-05T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RIME-中州韻輸入法引擎"><a href="#RIME-中州韻輸入法引擎" class="headerlink" title="RIME | 中州韻輸入法引擎"></a>RIME | 中州韻輸入法引擎</h1><p>分享 2 个比较不错且好用的词库<br><a href="https://github.com/gaboolic/rime-frost?tab=readme-ov-file">白霜拼音</a>：这个呢是我自己目前在用的<br><a href="https://github.com/iDvel/rime-ice">雾凇词库</a>：转白霜拼音之前使用的  </p><h1 id="词库用法"><a href="#词库用法" class="headerlink" title="词库用法"></a>词库用法</h1><ul><li>下载之后把里面的文件都放到 <code>用户文件夹</code> 里</li><li><code>重新部署</code> 之后在输入法设定里面选择你下载的词库</li></ul><h1 id="更改字体、字号，把竖排改为横排"><a href="#更改字体、字号，把竖排改为横排" class="headerlink" title="更改字体、字号，把竖排改为横排"></a>更改字体、字号，把竖排改为横排</h1><ul><li>在用户文件夹里新建 <code>weasel.custom.yaml</code>，在里面输入如下内容：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">patch:  </span><br><span class="line">  &quot;style/font_face&quot;: &quot;微软雅黑&quot;  </span><br><span class="line">  &quot;style/font_point&quot;: 13  </span><br><span class="line">  &quot;style/horizontal&quot;: true</span><br></pre></td></tr></table></figure><blockquote><p>如果有好的词库或者设置欢迎分享</p></blockquote>]]></content>
    
    
    <summary type="html">突然想要记录和分享一下自用的输入法</summary>
    
    
    
    <category term="软件" scheme="https://blog.667408.xyz/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="白霜拼音" scheme="https://blog.667408.xyz/tags/%E7%99%BD%E9%9C%9C%E6%8B%BC%E9%9F%B3/"/>
    
    <category term="输入法" scheme="https://blog.667408.xyz/tags/%E8%BE%93%E5%85%A5%E6%B3%95/"/>
    
    <category term="雾凇词库" scheme="https://blog.667408.xyz/tags/%E9%9B%BE%E5%87%87%E8%AF%8D%E5%BA%93/"/>
    
    <category term="小狼毫" scheme="https://blog.667408.xyz/tags/%E5%B0%8F%E7%8B%BC%E6%AF%AB/"/>
    
    <category term="中州韻" scheme="https://blog.667408.xyz/tags/%E4%B8%AD%E5%B7%9E%E9%9F%BB/"/>
    
    <category term="RIME" scheme="https://blog.667408.xyz/tags/RIME/"/>
    
  </entry>
  
  <entry>
    <title>Chsrc--全功能一键换源工具</title>
    <link href="https://blog.667408.xyz/posts/b330686.html"/>
    <id>https://blog.667408.xyz/posts/b330686.html</id>
    <published>2024-11-03T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>项目地址：<a href="https://github.com/RubyMetric/chsrc">chsrc</a></p><h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>打开 <code>CMD</code>，输入命令下载</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://gitee.com/RubyMetric/chsrc/releases/download/pre/chsrc-x64-windows.exe -o chsrc.exe</span><br></pre></td></tr></table></figure><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>输入以下命令，就能切换到最快的源：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsrc set node</span><br></pre></td></tr></table></figure><ul><li>使用特定的 Node 镜像源，一样熟悉的操作，只需要输入如下命令，即可启用</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsrc set node https://your.custom.source</span><br></pre></td></tr></table></figure><ul><li>测试 Node 源的速度，输入以下命令：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsrc measure node</span><br></pre></td></tr></table></figure><ul><li>将源重置到默认设置，输入以下命令：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsrc reset &lt;target&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;项目地址：&lt;a href=&quot;https://github.com/RubyMetric/chsrc&quot;&gt;chsrc&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="换源" scheme="https://blog.667408.xyz/tags/%E6%8D%A2%E6%BA%90/"/>
    
    <category term="Chsrc" scheme="https://blog.667408.xyz/tags/Chsrc/"/>
    
  </entry>
  
  <entry>
    <title>留言板页添加全屏弹幕</title>
    <link href="https://blog.667408.xyz/posts/9010447f.html"/>
    <id>https://blog.667408.xyz/posts/9010447f.html</id>
    <published>2024-11-02T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="留言板全屏弹幕介绍"><a href="#留言板全屏弹幕介绍" class="headerlink" title="留言板全屏弹幕介绍"></a>留言板全屏弹幕介绍</h1><h2 id="功能概功能概述"><a href="#功能概功能概述" class="headerlink" title="功能概功能概述"></a>功能概功能概述</h2><ol><li>弹幕行数</li><li>弹幕播放速度</li><li>鼠标 hover 时是否暂停播放弹幕</li><li>开启循环播放</li><li>循环弹幕播放时长</li><li>开启彩色弹幕</li><li>弹幕密度系数</li></ol><h2 id="友情提示"><a href="#友情提示" class="headerlink" title="友情提示"></a>友情提示</h2><p><strong>如果之前安装过插件留言板请使用以下命令卸载在按照本教程安装</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-butterfly-envelope --save</span><br></pre></td></tr></table></figure><p><strong>卸载后记得把原始 <code>_config.yml</code> 或 <code>_config.anzhiyu.yml</code> 里添加的插件配置文件删除</strong></p><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><h3 id="1-新建留言板页面"><a href="#1-新建留言板页面" class="headerlink" title="1. 新建留言板页面"></a>1. 新建留言板页面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page comments</span><br></pre></td></tr></table></figure><h3 id="2-配置-新建留言板文件夹下的-index"><a href="#2-配置-新建留言板文件夹下的-index" class="headerlink" title="2. 配置 新建留言板文件夹下的 index"></a>2. 配置 新建留言板文件夹下的 <code>index</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---  </span><br><span class="line">title: 留言板  </span><br><span class="line">date: 2023-12-26 22:16:14  </span><br><span class="line">comments: true  </span><br><span class="line">top_img: false  </span><br><span class="line">type: &#x27;envelope&#x27;  </span><br><span class="line">aside: false  </span><br><span class="line">top_background: https://s11.ax1x.com/2023/12/20/pioqoNT.jpg # 图片链接  </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="3-主题配置文件-config-anzhiyu-yml-注意缩进"><a href="#3-主题配置文件-config-anzhiyu-yml-注意缩进" class="headerlink" title="3. 主题配置文件 _config.anzhiyu.yml 注意缩进"></a>3. 主题配置文件 _config.anzhiyu.yml 注意缩进</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">menu:  </span><br><span class="line">  友链:  </span><br><span class="line">    # 友人帐: /link/ || anzhiyu-icon-link  </span><br><span class="line">    # 朋友圈: /fcircle/ || anzhiyu-icon-artstation  </span><br><span class="line">    留言板: /comments/ || anzhiyu-icon-envelope  </span><br><span class="line">  </span><br><span class="line">#envelope_comment  </span><br><span class="line">#seehttps://akilar.top/posts/e2d3c450/  </span><br><span class="line">envelope_comment:  </span><br><span class="line">  enable: true #控制开关  </span><br><span class="line">  custom_pic:  </span><br><span class="line">    cover: https://npm.elemecdn.com/hexo-butterfly-envelope/lib/violet.jpg #信笺头部图片  </span><br><span class="line">    line: https://npm.elemecdn.com/hexo-butterfly-envelope/lib/line.png #信笺底部图片  </span><br><span class="line">    beforeimg: https://npm.elemecdn.com/hexo-butterfly-envelope/lib/before.png # 信封前半部分  </span><br><span class="line">    afterimg: https://npm.elemecdn.com/hexo-butterfly-envelope/lib/after.png # 信封后半部分  </span><br><span class="line">  message: #信笺正文，多行文本，写法如下  </span><br><span class="line">    - 有什么想问的？  </span><br><span class="line">    - 有什么想说的？  </span><br><span class="line">    - 有什么想吐槽的？  </span><br><span class="line">    - 哪怕是有什么想吃的，都可以告诉我哦~  </span><br><span class="line">  bottom: 自动书记人偶竭诚为您服务！ #仅支持单行文本  </span><br><span class="line">  height: #1024px，信封划出的高度  </span><br><span class="line">  easy_Danmaku_js: https://npm.onmicrosoft.cn/naokuo-blog@1.2.12/js/easy-Danmaku.js # 源码：https://github.com/pprory/easyDanmaku  </span><br><span class="line">  danmu_page: &#x27;/comments/&#x27; # 即留言板地址  </span><br><span class="line">  danmu_el: &#x27;danmu-wrap&#x27; # 弹幕挂载节点  </span><br><span class="line">  danmu_line: 5 # 弹幕行数  </span><br><span class="line">  danmu_speed: 20 # 弹幕播放速度  </span><br><span class="line">  danmu_hover: true # 鼠标hover时是否暂停播放弹幕  </span><br><span class="line">  danmu_loop: false # 开启循环播放  </span><br><span class="line">  danmu_runtime: 10 # 循环弹幕播放时长  </span><br><span class="line">  danmu_colourful: true # 开启彩色弹幕  </span><br><span class="line">  danmu_coefficient: 1.38 # 弹幕密度系数</span><br></pre></td></tr></table></figure><h3 id="4-新建-envelope-pug"><a href="#4-新建-envelope-pug" class="headerlink" title="4. 新建 envelope.pug"></a>4. 新建 envelope.pug</h3><ul><li><code>themes/anzhiyu/layout/includes/page/envelope.pug</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">#naokuo_envelope  </span><br><span class="line">  - let maincontent_background = page.top_background  </span><br><span class="line">  .author-content.author-content-item.album.single(style=`$&#123;maincontent_background ? `background: url($&#123;maincontent_background&#125;) top / cover no-repeat;` : &quot;&quot;&#125;`)  </span><br><span class="line">    .card-content  </span><br><span class="line">      .author-content-item-tips 留言板  </span><br><span class="line">      span.author-content-item-title 自动书记人偶竭诚为您服务！🤪  </span><br><span class="line">      .content-bottom  </span><br><span class="line">        .tips 有什么想说的，都可以告诉我哦~  </span><br><span class="line">      .banner-button-group  </span><br><span class="line">        a.banner-button(onclick=`pjax.loadUrl(&#x27;/about/&#x27;)`)  </span><br><span class="line">          i.anzhiyufont.anzhiyu-icon-circle-arrow-up-right-1(style=&#x27;font-size: 1.5rem&#x27;)  </span><br><span class="line">          span.banner-button-text 关于本人  </span><br><span class="line">  #maincontent  </span><br><span class="line">    #form-wrap  </span><br><span class="line">      img#beforeimg.no-lightbox(src=url_for(theme.envelope_comment.custom_pic.beforeimg))  </span><br><span class="line">      #envelope  </span><br><span class="line">        form  </span><br><span class="line">          .formmain(style=&quot;pointer-events: none;&quot;)  </span><br><span class="line">            img.headerimg.no-lightbox(src=url_for(theme.envelope_comment.custom_pic.cover) style=&quot;width: 100%;overflow: hidden;pointer-events: none;&quot;)  </span><br><span class="line">            .comments-main  </span><br><span class="line">              h3.title3(style=&quot;text-decoration: none;color: var(--anzhiyu-theme);text-align: center;&quot;)=`来自` + config.author + `的留言:`  </span><br><span class="line">              .comments(style=&quot;text-align: center;border-bottom: #ddd 1px solid;border-left: #ddd 1px solid;padding-bottom: 20px;background-color: #eee;margin: 15px 0px;padding-left: 20px;padding-right: 20px;border-top: #ddd 1px solid;border-right: #ddd 1px solid;padding-top: 20px;&quot;)  </span><br><span class="line">                each i in theme.envelope_comment.message  </span><br><span class="line">                  div=`$&#123;i&#125;`  </span><br><span class="line">              .bottomcontent(style=&quot;text-align: center;margin-top: 40px;&quot;)  </span><br><span class="line">                img.bottomimg.no-lightbox(src=url_for(theme.envelope_comment.custom_pic.line) style=&quot;width: 100%;margin: 5px auto 5px auto;display: block;pointer-events: none;&quot;)  </span><br><span class="line">              p.bottomhr(style=&quot;font-size: 12px;text-align: center;color: #999;&quot;)=`$&#123;theme.envelope_comment.bottom&#125;`  </span><br><span class="line">      img#afterimg.no-lightbox(src=url_for(theme.envelope_comment.custom_pic.afterimg))  </span><br><span class="line">        </span><br><span class="line">if theme.envelope_comment.enable &amp;&amp; theme.envelope_comment.easy_Danmaku_js  </span><br><span class="line">  #danmu-Btn  </span><br><span class="line">  #danmu-wrap  </span><br><span class="line">  style.  </span><br><span class="line">    #article-container a:not(.headerlink, .fancybox, .default-style a) &#123;  </span><br><span class="line">      font-weight: 700;  </span><br><span class="line">      color: var(--font-color);  </span><br><span class="line">      padding: 0 3px;  </span><br><span class="line">      border-bottom: 2px var(--anzhiyu-main) solid;  </span><br><span class="line">    &#125;  </span><br><span class="line">    #article-container a:not(.headerlink, .fancybox, .default-style a):hover &#123;  </span><br><span class="line">      color: #fff;  </span><br><span class="line">      border-radius: 5px;  </span><br><span class="line">      text-decoration: none;  </span><br><span class="line">      background-color: var(--anzhiyu-main);  </span><br><span class="line">    &#125;  </span><br><span class="line">    #danmu-wrap &#123;  </span><br><span class="line">      width: 100%;  </span><br><span class="line">      height: calc(100% - 60px);  </span><br><span class="line">      position: fixed;  </span><br><span class="line">      left: 0;  </span><br><span class="line">      top: 60px;  </span><br><span class="line">      z-index: 3;  </span><br><span class="line">      pointer-events: none;  </span><br><span class="line">    &#125;  </span><br><span class="line">    .hide-danmu &#123;  </span><br><span class="line">      opacity: 0;  </span><br><span class="line">    &#125;  </span><br><span class="line">    .hide-danmu * &#123;  </span><br><span class="line">      pointer-events: none !important;  </span><br><span class="line">    &#125;  </span><br><span class="line">    div#danmu-Btn &#123;  </span><br><span class="line">      display: flex;  </span><br><span class="line">      justify-content: center;  </span><br><span class="line">      margin: 64px 0 0;  </span><br><span class="line">    &#125;  </span><br><span class="line">    div#danmu-Btn button.hide-Btn &#123;  </span><br><span class="line">      background: rgba(52,106,133,);  </span><br><span class="line">      color: white;  </span><br><span class="line">      padding: 8px 20px;  </span><br><span class="line">      margin: 0 20px;  </span><br><span class="line">      border-radius: 100px;  </span><br><span class="line">    &#125;  </span><br><span class="line">    div#danmu-Btn button.hide-Btn:hover &#123;  </span><br><span class="line">      background: var(--anzhiyu-main);  </span><br><span class="line">    &#125;  </span><br><span class="line">    .default-style &#123;  </span><br><span class="line">      pointer-events: all;  </span><br><span class="line">      cursor: pointer;  </span><br><span class="line">      font-size: 16px;  </span><br><span class="line">      border-radius: 100px;  </span><br><span class="line">      overflow: hidden;  </span><br><span class="line">      color: #eee;  </span><br><span class="line">    &#125;  </span><br><span class="line">    .default-style a &#123;  </span><br><span class="line">      background-color: var(--naokuo-danmuBg);  </span><br><span class="line">      transition: s;  </span><br><span class="line">      color: inherit;  </span><br><span class="line">      display: flex;  </span><br><span class="line">      align-items: center;  </span><br><span class="line">      justify-content: center;  </span><br><span class="line">      padding: 6px 16px 6px 6px;  </span><br><span class="line">      text-decoration: none !important;  </span><br><span class="line">    &#125;  </span><br><span class="line">    .default-style a:hover &#123;  </span><br><span class="line">      background-color: var(--anzhiyu-main);  </span><br><span class="line">    &#125;  </span><br><span class="line">    .default-style img &#123;  </span><br><span class="line">      pointer-events: none;  </span><br><span class="line">      height: 30px;  </span><br><span class="line">      width: 30px;  </span><br><span class="line">      margin: 0 5px 0 0 !important;  </span><br><span class="line">      border-radius: 50% !important;  </span><br><span class="line">    &#125;  </span><br><span class="line">    .default-style p &#123;  </span><br><span class="line">      line-height: 1;  </span><br><span class="line">      pointer-events: none;  </span><br><span class="line">      margin: 0 !important;  </span><br><span class="line">      max-width: 300px;  </span><br><span class="line">      white-space: nowrap;  </span><br><span class="line">      overflow: hidden;  </span><br><span class="line">      text-overflow: ellipsis;  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="5-引入-envelope-pug"><a href="#5-引入-envelope-pug" class="headerlink" title="5. 引入 envelope.pug"></a>5. 引入 envelope.pug</h3><ul><li><code>themes/anzhiyu/layout/page.pug</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">block content  </span><br><span class="line">  #page  </span><br><span class="line">    if top_img === false &amp;&amp; !page.top_single  </span><br><span class="line">      h1.page-title= page.title  </span><br><span class="line">    case page.type  </span><br><span class="line">      when &#x27;tags&#x27;  </span><br><span class="line">        include includes/page/tags.pug  </span><br><span class="line">      when &#x27;link&#x27;  </span><br><span class="line">        include includes/page/flink.pug  </span><br><span class="line">      when &#x27;categories&#x27;  </span><br><span class="line">        include includes/page/categories.pug  </span><br><span class="line">      when &#x27;essay&#x27;  </span><br><span class="line">        include includes/page/essay.pug  </span><br><span class="line">      when &#x27;room&#x27;  </span><br><span class="line">        include includes/page/room.pug  </span><br><span class="line">      when &#x27;about&#x27;  </span><br><span class="line">        include includes/page/about.pug  </span><br><span class="line">      when &#x27;album&#x27;  </span><br><span class="line">        include includes/page/album.pug  </span><br><span class="line">      when &#x27;fcircle&#x27;  </span><br><span class="line">        include includes/page/fcircle.pug  </span><br><span class="line">      when &#x27;album_detail&#x27;  </span><br><span class="line">        include includes/page/album_detail.pug  </span><br><span class="line">      when &#x27;music&#x27;  </span><br><span class="line">        include includes/page/music.pug  </span><br><span class="line">+     when &#x27;envelope&#x27;  </span><br><span class="line">+       include includes/page/envelope.pug          </span><br><span class="line">      default  </span><br><span class="line">        include includes/page/default-page.pug</span><br></pre></td></tr></table></figure><h3 id="6-新建-danmu-pug"><a href="#6-新建-danmu-pug" class="headerlink" title="6. 新建 danmu.pug"></a>6. 新建 danmu.pug</h3><ul><li><code>themes/anzhiyu/layout/includes/anzhiyu/danmu.pug</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">- const &#123; envId &#125; = theme.twikoo  </span><br><span class="line">- const &#123; easy_Danmaku_js, danmu_page, danmu_el, danmu_line, danmu_speed, danmu_hover, danmu_loop, danmu_colourful, danmu_coefficient, danmu_runtime &#125; = theme.envelope_comment  </span><br><span class="line">  </span><br><span class="line">script.  </span><br><span class="line">  //- 留言板页面弹幕  </span><br><span class="line">  window.addEventListener(&#x27;load&#x27;, () =&gt; &#123;  </span><br><span class="line">    const getnaokuo_danmu = () =&gt; &#123;  </span><br><span class="line">      if (!window.location.pathname.startsWith(&#x27;!&#123;danmu_page&#125;&#x27;)) return; //- 判断是否是留言板页面  </span><br><span class="line">      const naokuo_danmu = async () =&gt; &#123;  </span><br><span class="line">        const Danmaku = new EasyDanmaku(&#123;  </span><br><span class="line">          page: &#x27;!&#123;danmu_page&#125;&#x27;, //- 即留言板地址  </span><br><span class="line">          el: &#x27;#!&#123;danmu_el&#125;&#x27;, //- 弹幕挂载节点  </span><br><span class="line">          line: !&#123;danmu_line&#125;, //- 弹幕行数  </span><br><span class="line">          speed: !&#123;danmu_speed&#125;, //- 弹幕播放速度  </span><br><span class="line">          hover: !&#123;danmu_hover&#125;, //- 鼠标hover时是否暂停播放弹幕  </span><br><span class="line">          loop: !&#123;danmu_loop&#125;, //- 开启循环播放  </span><br><span class="line">          colourful: !&#123;danmu_colourful&#125;, //- 开启彩色弹幕  </span><br><span class="line">          coefficient: !&#123;danmu_coefficient&#125;, //- 弹幕密度系数  </span><br><span class="line">          runtime: !&#123;danmu_runtime&#125;, //- 循环弹幕播放时长  </span><br><span class="line">        &#125;);  </span><br><span class="line">        try &#123;  </span><br><span class="line">          let danmuStore = saveToLocal.get(&#x27;twikoo-danmu&#x27;);  </span><br><span class="line">          if (!danmuStore) &#123;  </span><br><span class="line">            const options = &#123;  </span><br><span class="line">              method: &quot;POST&quot;,  </span><br><span class="line">              body: JSON.stringify(&#123;  </span><br><span class="line">                &quot;event&quot;: &quot;GET_RECENT_COMMENTS&quot;,  </span><br><span class="line">                &quot;includeReply&quot;: false,  </span><br><span class="line">                &quot;pageSize&quot;: 100  </span><br><span class="line">              &#125;),  </span><br><span class="line">              headers: &#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125;  </span><br><span class="line">            &#125;  </span><br><span class="line">            danmuStore = [];  </span><br><span class="line">            const response = await fetch(`!&#123;envId&#125;`, options);  </span><br><span class="line">            if (response.ok) &#123;  </span><br><span class="line">              const &#123; data &#125; = await response.json();  </span><br><span class="line">              //- console.info(data);  </span><br><span class="line">              data.forEach(i =&gt; &#123;  </span><br><span class="line">                if (i.avatar == undefined) i.avatar = &#x27;https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp&#x27;  </span><br><span class="line">                danmuStore.push(&#123; avatar: i.avatar, content: i.nick + &#x27;：&#x27; + formatDanmaku(i.comment), url: i.url + &#x27;#&#x27; + i.id &#125;)  </span><br><span class="line">              &#125;);  </span><br><span class="line">              Danmaku.batchSend(danmuStore, true);  </span><br><span class="line">              saveToLocal.set(&#x27;twikoo-danmu&#x27;, danmuStore, 0.5)  </span><br><span class="line">            &#125;  </span><br><span class="line">            //- 格式化评论  </span><br><span class="line">            function formatDanmaku(str) &#123;  </span><br><span class="line">              str = str.replace(/&lt;\/*br&gt;|[\s\uFEFF\xA0]+/g, &#x27;&#x27;);  </span><br><span class="line">              str = str.replace(/&lt;img.*?&gt;/g, &#x27;[图片]&#x27;);  </span><br><span class="line">              str = str.replace(/&lt;a.*?&gt;.*?&lt;\/a&gt;/g, &#x27;[链接]&#x27;);  </span><br><span class="line">              str = str.replace(/&lt;pre.*?&gt;.*?&lt;\/pre&gt;/g, &#x27;[代码块]&#x27;);  </span><br><span class="line">              str = str.replace(/&lt;.*?&gt;/g, &#x27;&#x27;);  </span><br><span class="line">              return str  </span><br><span class="line">            &#125;  </span><br><span class="line">          &#125; else &#123;  </span><br><span class="line">            Danmaku.batchSend(danmuStore, true);  </span><br><span class="line">          &#125;  </span><br><span class="line">        &#125; catch (err) &#123;  </span><br><span class="line">          console.error(&quot;Error fetching data:&quot;, err);  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        document.getElementById(&#x27;danmu-Btn&#x27;) &amp;&amp; (document.getElementById(&#x27;danmu-Btn&#x27;).innerHTML = `&lt;button class=&quot;hide-Btn&quot; onclick=&quot;document.getElementById(&#x27;!&#123;danmu_el&#125;&#x27;).classList.remove(&#x27;hide-danmu&#x27;)&quot;&gt;显示弹幕&lt;/button&gt; &lt;button class=&quot;hide-Btn&quot; onclick=&quot;document.getElementById(&#x27;!&#123;danmu_el&#125;&#x27;).classList.add(&#x27;hide-danmu&#x27;)&quot;&gt;隐藏弹幕&lt;/button&gt;`)  </span><br><span class="line">      &#125;  </span><br><span class="line">      (async () =&gt; &#123;  </span><br><span class="line">        if (typeof EasyDanmaku === &#x27;function&#x27;) &#123;  </span><br><span class="line">          await naokuo_danmu();  </span><br><span class="line">        &#125; else &#123;  </span><br><span class="line">          const easyDanmakuScript = await getScript(&#x27;!&#123;url_for(easy_Danmaku_js)&#125;&#x27;);  </span><br><span class="line">          if (typeof EasyDanmaku === &#x27;function&#x27;) &#123;  </span><br><span class="line">            await naokuo_danmu();  </span><br><span class="line">          &#125; else &#123;  </span><br><span class="line">            console.error(&#x27;EasyDanmaku function not found even after loading the script.&#x27;);  </span><br><span class="line">          &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">      &#125;)();  </span><br><span class="line">    &#125;  </span><br><span class="line">    getnaokuo_danmu()  </span><br><span class="line">    document.addEventListener(&#x27;pjax:complete&#x27;, getnaokuo_danmu)  </span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h3 id="7-引入-danmu-pug"><a href="#7-引入-danmu-pug" class="headerlink" title="7. 引入 danmu.pug"></a>7. 引入 danmu.pug</h3><ul><li><code>themes/anzhiyu/layout/includes/additional-js.pug</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//- 弹幕js  </span><br><span class="line">if theme.envelope_comment.enable &amp;&amp; theme.envelope_comment.easy_Danmaku_js  </span><br><span class="line">  != partial(&quot;includes/anzhiyu/danmu.pug&quot;, &#123;&#125;, &#123; cache: true &#125;)</span><br></pre></td></tr></table></figure><h3 id="8-新建-CSS-样式"><a href="#8-新建-CSS-样式" class="headerlink" title="8. 新建 CSS 样式"></a>8. 新建 CSS 样式</h3><ul><li><code>themes/anzhiyu/source/css/_page/envelope.styl</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">if hexo-config(&#x27;envelope_comment.enable&#x27;)  </span><br><span class="line">  $hoverHeight = hexo-config(&#x27;envelope_comment.height&#x27;) ? convert(hexo-config(&#x27;envelope_comment.height&#x27;)) : 1050px  </span><br><span class="line">  body[data-type=&quot;envelope&quot;]  </span><br><span class="line">    #page  </span><br><span class="line">      border: 0  </span><br><span class="line">      box-shadow: none !important  </span><br><span class="line">      padding: 0 !important  </span><br><span class="line">      background: 0 0 !important  </span><br><span class="line">    .page-title  </span><br><span class="line">      display: none  </span><br><span class="line">    #maincontent  </span><br><span class="line">      margin: 64px 0 0  </span><br><span class="line">  </span><br><span class="line">    @media screen and (max-width: 600px)  </span><br><span class="line">      #beforeimg,  </span><br><span class="line">      #afterimg  </span><br><span class="line">        display: none !important  </span><br><span class="line">  </span><br><span class="line">    @media screen and (min-width: 600px)  </span><br><span class="line">      #article-container img  </span><br><span class="line">        margin: 0 auto 0rem  </span><br><span class="line">        </span><br><span class="line">      #form-wrap  </span><br><span class="line">        overflow: hidden  </span><br><span class="line">        height: 447px  </span><br><span class="line">        position: relative  </span><br><span class="line">        top: 0px  </span><br><span class="line">        transition: all 1s ease-in-out s  </span><br><span class="line">        z-index: 0  </span><br><span class="line">        &amp;:hover  </span><br><span class="line">          height: $hoverHeight  </span><br><span class="line">          top: -200px  </span><br><span class="line">          will-change: transform,top  </span><br><span class="line">        </span><br><span class="line">      #beforeimg  </span><br><span class="line">        position: absolute  </span><br><span class="line">        bottom: 126px  </span><br><span class="line">        left: 0px  </span><br><span class="line">        background-repeat: no-repeat  </span><br><span class="line">        width: 530px  </span><br><span class="line">        height: 317px  </span><br><span class="line">        z-index: -100  </span><br><span class="line">        pointer-events: none  </span><br><span class="line">        </span><br><span class="line">      #afterimg  </span><br><span class="line">        position: absolute  </span><br><span class="line">        bottom: -2px  </span><br><span class="line">        left: 0  </span><br><span class="line">        background-repeat: no-repeat  </span><br><span class="line">        width: 530px  </span><br><span class="line">        height: 259px  </span><br><span class="line">        z-index: 100  </span><br><span class="line">        pointer-events: none  </span><br><span class="line">  </span><br><span class="line">      #envelope  </span><br><span class="line">        position: relative  </span><br><span class="line">        overflow: visible  </span><br><span class="line">        width: 500px  </span><br><span class="line">        margin: 0px auto  </span><br><span class="line">        transition: all 1s ease-in-out s  </span><br><span class="line">        padding-top: 200px  </span><br><span class="line">        will-change: transform  </span><br><span class="line">  </span><br><span class="line">      #maincontent  </span><br><span class="line">        width: 530px  </span><br><span class="line">        margin: 20px auto 0  </span><br><span class="line">        </span><br><span class="line">      .formmain  </span><br><span class="line">        background: white  </span><br><span class="line">        width: 95%  </span><br><span class="line">        max-width: 800px  </span><br><span class="line">        margin: auto auto  </span><br><span class="line">        border-radius: 5px  </span><br><span class="line">        border: 1px solid  </span><br><span class="line">        overflow: hidden  </span><br><span class="line">        -webkit-box-shadow: 0px 0px 20px 0px #000000  </span><br><span class="line">        box-shadow: 0px 0px 20px 0px #000000  </span><br><span class="line">        </span><br><span class="line">  // 夜间模式  </span><br><span class="line">  [data-theme=&#x27;dark&#x27;]  </span><br><span class="line">    --naokuo-danmuBg: rgba(255, 255, 255, 0.3)  </span><br><span class="line">    body[data-type=&quot;envelope&quot;]  </span><br><span class="line">      .formmain  </span><br><span class="line">        background: #323232  </span><br><span class="line">      .comments  </span><br><span class="line">        background: #5a5a5a !important  </span><br><span class="line">  [data-theme=&quot;light&quot;]  </span><br><span class="line">    --naokuo-danmuBg: rgba(0, 0, 0, 0.5)</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;留言板全屏弹幕介绍&quot;&gt;&lt;a href=&quot;#留言板全屏弹幕介绍&quot; class=&quot;headerlink&quot; title=&quot;留言板全屏弹幕介绍&quot;&gt;&lt;/a&gt;留言板全屏弹幕介绍&lt;/h1&gt;&lt;h2 id=&quot;功能概功能概述&quot;&gt;&lt;a href=&quot;#功能概功能概述&quot; class=&quot;he</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="留言板" scheme="https://blog.667408.xyz/tags/%E7%95%99%E8%A8%80%E6%9D%BF/"/>
    
  </entry>
  
  <entry>
    <title>添加更简单的来访者信息</title>
    <link href="https://blog.667408.xyz/posts/97f71a87.html"/>
    <id>https://blog.667408.xyz/posts/97f71a87.html</id>
    <published>2024-10-31T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>打开公告,注意缩进</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">card_announcement:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 必须开启</span></span><br><span class="line">  <span class="attr">content:</span> <span class="string">&lt;span&gt;👋🏻</span> <span class="string">Hi，我是一粒微尘，欢迎你！&lt;/span&gt;&lt;br&gt;</span></span><br><span class="line">         <span class="string">&lt;span&gt;❓</span> <span class="string">如有问题欢迎评论区交流！&lt;/span&gt;&lt;br&gt;</span></span><br><span class="line">         <span class="string">&lt;span&gt;😫</span> <span class="string">页面异常？尝试&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;F5&lt;/kbd&gt;&lt;/span&gt;&lt;br&gt;</span></span><br><span class="line">         <span class="string">&lt;span&gt;📧</span> <span class="string">如需联系我：&lt;a</span> <span class="string">href=&quot;mailto:nbjmup;758215352Arr/dpn&quot;&gt;&lt;b&gt;发送邮件🚀&lt;/b&gt;&lt;/a&gt;&lt;/span&gt;</span></span><br><span class="line">         <span class="string">&lt;div</span> <span class="string">id=&quot;welcome-info&quot;&gt;&lt;/div&gt;</span> <span class="comment"># 必须项</span></span><br></pre></td></tr></table></figure><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>搜索 <code>bottom:</code> 添加一个 js 文件，这里用的 <code>card-welcome.js</code></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bottom:</span></span><br><span class="line">  <span class="comment"># 自定义js</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/card-welcome.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 来访者信息</span></span><br></pre></td></tr></table></figure><hr><h1 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h1><ul><li>在 <code>source\js</code> 下新建一个 <code>card-welcome.js</code>,替换全部内容，自己修改想要的内容</li><li>搜索 <code>经度</code> 和 <code>纬度</code>，自己替换</li><li>申请 <code>青桔</code> 的 API：<a href="https://api.76.al/">地址</a></li><li>搜索 <code>青桔API</code>,替换自己的 API<br><img src="https://img.667408.xyz/2024/11/01/721779.png" alt="721779.png"></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">IP_CONFIG</span> = &#123;</span><br><span class="line"><span class="attr">API_KEY</span>: <span class="string">&#x27;青桔API&#x27;</span>, <span class="comment">// API密钥 申请地址：https://api.76.al/</span></span><br><span class="line"><span class="attr">BLOG_LOCATION</span>: &#123;</span><br><span class="line"><span class="attr">lng</span>: <span class="number">1.1</span>, <span class="comment">// 经度</span></span><br><span class="line"><span class="attr">lat</span>: <span class="number">2.2</span> <span class="comment">// 纬度</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">CACHE_DURATION</span>: <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>, <span class="comment">// 可配置缓存时间(默认1小时)</span></span><br><span class="line"><span class="attr">HOME_PAGE_ONLY</span>: <span class="literal">true</span>, <span class="comment">// 是否只在首页显示 开启后其它页面将不会显示这个容器</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">insertAnnouncementComponent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="comment">// 获取所有公告卡片</span></span><br><span class="line"><span class="keyword">const</span> announcementCards = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.card-widget.card-announcement&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (!announcementCards.<span class="property">length</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable constant_">IP_CONFIG</span>.<span class="property">HOME_PAGE_ONLY</span> &amp;&amp; !<span class="title function_">isHomePage</span>()) &#123;</span><br><span class="line">announcementCards.<span class="title function_">forEach</span>(<span class="function"><span class="params">card</span> =&gt;</span> card.<span class="title function_">remove</span>());</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#welcome-info&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line"><span class="title function_">fetchIpInfo</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getWelcomeInfoElement</span> = (<span class="params"></span>) =&gt; <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#welcome-info&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fetchIpData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://api.76.al/api/ip/query?key=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(IP_CONFIG.API_KEY)&#125;</span>`</span>);</span><br><span class="line"><span class="keyword">if</span> (!response.<span class="property">ok</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;网络响应不正常&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">showWelcome</span> = (<span class="params">&#123;</span></span><br><span class="line"><span class="params">data,</span></span><br><span class="line"><span class="params">ip</span></span><br><span class="line"><span class="params">&#125;</span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (!data) <span class="keyword">return</span> <span class="title function_">showErrorMessage</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">lng,</span><br><span class="line">lat,</span><br><span class="line">country,</span><br><span class="line">prov,</span><br><span class="line">city</span><br><span class="line">&#125; = data;</span><br><span class="line"><span class="keyword">const</span> welcomeInfo = <span class="title function_">getWelcomeInfoElement</span>();</span><br><span class="line"><span class="keyword">if</span> (!welcomeInfo) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dist = <span class="title function_">calculateDistance</span>(lng, lat);</span><br><span class="line"><span class="keyword">const</span> ipDisplay = <span class="title function_">formatIpDisplay</span>(ip);</span><br><span class="line"><span class="keyword">const</span> pos = <span class="title function_">formatLocation</span>(country, prov, city);</span><br><span class="line"></span><br><span class="line">welcomeInfo.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">welcomeInfo.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&#x27;auto&#x27;</span>;</span><br><span class="line">welcomeInfo.<span class="property">innerHTML</span> = <span class="title function_">generateWelcomeMessage</span>(pos, dist, ipDisplay, country, prov, city);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">calculateDistance</span> = (<span class="params">lng, lat</span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> R = <span class="number">6371</span>; <span class="comment">// 地球半径(km)</span></span><br><span class="line"><span class="keyword">const</span> rad = <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>;</span><br><span class="line"><span class="keyword">const</span> dLat = (lat - <span class="variable constant_">IP_CONFIG</span>.<span class="property">BLOG_LOCATION</span>.<span class="property">lat</span>) * rad;</span><br><span class="line"><span class="keyword">const</span> dLon = (lng - <span class="variable constant_">IP_CONFIG</span>.<span class="property">BLOG_LOCATION</span>.<span class="property">lng</span>) * rad;</span><br><span class="line"><span class="keyword">const</span> a = <span class="title class_">Math</span>.<span class="title function_">sin</span>(dLat / <span class="number">2</span>) * <span class="title class_">Math</span>.<span class="title function_">sin</span>(dLat / <span class="number">2</span>) +</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">cos</span>(<span class="variable constant_">IP_CONFIG</span>.<span class="property">BLOG_LOCATION</span>.<span class="property">lat</span> * rad) * <span class="title class_">Math</span>.<span class="title function_">cos</span>(lat * rad) *</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">sin</span>(dLon / <span class="number">2</span>) * <span class="title class_">Math</span>.<span class="title function_">sin</span>(dLon / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">round</span>(R * <span class="number">2</span> * <span class="title class_">Math</span>.<span class="title function_">atan2</span>(<span class="title class_">Math</span>.<span class="title function_">sqrt</span>(a), <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="number">1</span> - a)));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">formatIpDisplay</span> = (<span class="params">ip</span>) =&gt; ip.<span class="title function_">includes</span>(<span class="string">&quot;:&quot;</span>) ? <span class="string">&quot;&lt;br&gt;好复杂，咱看不懂~(ipv6)&quot;</span> : ip;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">formatLocation</span> = (<span class="params">country, prov, city</span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> country ? (country === <span class="string">&quot;中国&quot;</span> ? <span class="string">`<span class="subst">$&#123;prov&#125;</span> <span class="subst">$&#123;city&#125;</span>`</span> : country) : <span class="string">&#x27;神秘地区&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">generateWelcomeMessage</span> = (<span class="params">pos, dist, ipDisplay, country, prov, city</span>) =&gt; <span class="string">`</span></span><br><span class="line"><span class="string">    欢迎来自 &lt;b&gt;<span class="subst">$&#123;pos&#125;</span>&lt;/b&gt; 的小友💖&lt;br&gt;</span></span><br><span class="line"><span class="string">    你当前距博主约 &lt;b&gt;<span class="subst">$&#123;dist&#125;</span>&lt;/b&gt; 公里！&lt;br&gt;</span></span><br><span class="line"><span class="string">    你的IP地址：&lt;b class=&quot;ip-address&quot;&gt;<span class="subst">$&#123;ipDisplay&#125;</span>&lt;/b&gt;&lt;br&gt;</span></span><br><span class="line"><span class="string">    <span class="subst">$&#123;getTimeGreeting()&#125;</span>&lt;br&gt;</span></span><br><span class="line"><span class="string">    Tip：&lt;b&gt;<span class="subst">$&#123;getGreeting(country, prov, city)&#125;</span>🍂&lt;/b&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addStyles</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> style = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;style&#x27;</span>);</span><br><span class="line">style.<span class="property">textContent</span> = <span class="string">`</span></span><br><span class="line"><span class="string">        #welcome-info &#123;</span></span><br><span class="line"><span class="string">            user-select: none;</span></span><br><span class="line"><span class="string">            display: flex;</span></span><br><span class="line"><span class="string">            justify-content: center;</span></span><br><span class="line"><span class="string">            align-items: center;</span></span><br><span class="line"><span class="string">            height: 212px;</span></span><br><span class="line"><span class="string">            padding: 10px;</span></span><br><span class="line"><span class="string">            margin-top: 5px;</span></span><br><span class="line"><span class="string">            border-radius: 12px;</span></span><br><span class="line"><span class="string">            background-color: var(--anzhiyu-background);</span></span><br><span class="line"><span class="string">            outline: 1px solid var(--anzhiyu-card-border);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .loading-spinner &#123;</span></span><br><span class="line"><span class="string">            width: 50px;</span></span><br><span class="line"><span class="string">            height: 50px;</span></span><br><span class="line"><span class="string">            border: 3px solid rgba(0, 0, 0, 0.1);</span></span><br><span class="line"><span class="string">            border-radius: 50%;</span></span><br><span class="line"><span class="string">            border-top: 3px solid var(--anzhiyu-main);</span></span><br><span class="line"><span class="string">            animation: spin 1s linear infinite;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        @keyframes spin &#123;</span></span><br><span class="line"><span class="string">            0% &#123; transform: rotate(0deg); &#125;</span></span><br><span class="line"><span class="string">            100% &#123; transform: rotate(360deg); &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .ip-address &#123;</span></span><br><span class="line"><span class="string">            filter: blur(5px);</span></span><br><span class="line"><span class="string">            transition: filter 0.3s ease;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .ip-address:hover &#123;</span></span><br><span class="line"><span class="string">            filter: blur(0);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .error-message &#123;</span></span><br><span class="line"><span class="string">            color: #ff6565;</span></span><br><span class="line"><span class="string">            display: flex;</span></span><br><span class="line"><span class="string">            flex-direction: column;</span></span><br><span class="line"><span class="string">            justify-content: center;</span></span><br><span class="line"><span class="string">            align-items: center;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .error-message p,</span></span><br><span class="line"><span class="string">        .permission-dialog p &#123;</span></span><br><span class="line"><span class="string">            margin: 0;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .error-icon &#123;</span></span><br><span class="line"><span class="string">            font-size: 3rem;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        #retry-button &#123;</span></span><br><span class="line"><span class="string">            margin: 0 5px;</span></span><br><span class="line"><span class="string">            color: var(--anzhiyu-main);</span></span><br><span class="line"><span class="string">            transition: transform 0.3s ease;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        #retry-button:hover &#123;</span></span><br><span class="line"><span class="string">            transform: rotate(180deg);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .permission-dialog &#123;</span></span><br><span class="line"><span class="string">            text-align: center;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .permission-dialog button &#123;</span></span><br><span class="line"><span class="string">            margin: 10px 5px;</span></span><br><span class="line"><span class="string">            padding: 5px 10px;</span></span><br><span class="line"><span class="string">            border: none;</span></span><br><span class="line"><span class="string">            border-radius: 5px;</span></span><br><span class="line"><span class="string">            background-color: var(--anzhiyu-main);</span></span><br><span class="line"><span class="string">            color: white;</span></span><br><span class="line"><span class="string">            transition: opacity 0.3s ease;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        .permission-dialog button:hover &#123;</span></span><br><span class="line"><span class="string">            opacity: 0.8;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(style);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 位置权限相关函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkLocationPermission</span> = (<span class="params"></span>) =&gt; <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;locationPermission&#x27;</span>) === <span class="string">&#x27;granted&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">saveLocationPermission</span> = (<span class="params">permission</span>) =&gt; &#123;</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;locationPermission&#x27;</span>, permission);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">showLocationPermissionDialog</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> welcomeInfoElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;welcome-info&quot;</span>);</span><br><span class="line">welcomeInfoElement.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;permission-dialog&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;error-icon&quot;&gt;❓&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;是否允许访问您的位置信息？&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;button data-action=&quot;allow&quot;&gt;允许&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button data-action=&quot;deny&quot;&gt;拒绝&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">welcomeInfoElement.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (e.<span class="property">target</span>.<span class="property">tagName</span> === <span class="string">&#x27;BUTTON&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">const</span> action = e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">action</span>;</span><br><span class="line"><span class="keyword">const</span> permission = action === <span class="string">&#x27;allow&#x27;</span> ? <span class="string">&#x27;granted&#x27;</span> : <span class="string">&#x27;denied&#x27;</span>;</span><br><span class="line"><span class="title function_">handleLocationPermission</span>(permission);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleLocationPermission</span> = (<span class="params">permission</span>) =&gt; &#123;</span><br><span class="line"><span class="title function_">saveLocationPermission</span>(permission);</span><br><span class="line"><span class="keyword">if</span> (permission === <span class="string">&#x27;granted&#x27;</span>) &#123;</span><br><span class="line"><span class="title function_">showLoadingSpinner</span>();</span><br><span class="line"><span class="title function_">fetchIpInfo</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="title function_">showErrorMessage</span>(<span class="string">&#x27;您已拒绝访问位置信息&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">showLoadingSpinner</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> welcomeInfoElement = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#welcome-info&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!welcomeInfoElement) <span class="keyword">return</span>;</span><br><span class="line">welcomeInfoElement.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;div class=&quot;loading-spinner&quot;&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">IP_CACHE_KEY</span> = <span class="string">&#x27;ip_info_cache&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getIpInfoFromCache</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> cached = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">IP_CACHE_KEY</span>);</span><br><span class="line"><span class="keyword">if</span> (!cached) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; data, timestamp &#125; = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(cached);</span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">Date</span>.<span class="title function_">now</span>() - timestamp &gt; <span class="variable constant_">IP_CONFIG</span>.<span class="property">CACHE_DURATION</span>) &#123;</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="variable constant_">IP_CACHE_KEY</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setIpInfoCache</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="variable constant_">IP_CACHE_KEY</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">data,</span><br><span class="line"><span class="attr">timestamp</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">&#125;));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fetchIpInfo</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_">checkLocationPermission</span>()) &#123;</span><br><span class="line"><span class="title function_">showLocationPermissionDialog</span>();</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">showLoadingSpinner</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cachedData = <span class="title function_">getIpInfoFromCache</span>();</span><br><span class="line"><span class="keyword">if</span> (cachedData) &#123;</span><br><span class="line"><span class="title function_">showWelcome</span>(cachedData);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchIpData</span>();</span><br><span class="line"><span class="title function_">setIpInfoCache</span>(data);</span><br><span class="line"><span class="title function_">showWelcome</span>(data);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取IP信息失败:&#x27;</span>, error);</span><br><span class="line"><span class="title function_">showErrorMessage</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> greetings = &#123;</span><br><span class="line"><span class="string">&quot;中国&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;北京市&quot;</span>: <span class="string">&quot;北——京——欢迎你~~~&quot;</span>,</span><br><span class="line"><span class="string">&quot;天津市&quot;</span>: <span class="string">&quot;讲段相声吧&quot;</span>,</span><br><span class="line"><span class="string">&quot;河北省&quot;</span>: <span class="string">&quot;山势巍巍成壁垒，天下雄关铁马金戈由此向，无限江山&quot;</span>,</span><br><span class="line"><span class="string">&quot;山西省&quot;</span>: <span class="string">&quot;展开坐具长三尺，已占山河五百余&quot;</span>,</span><br><span class="line"><span class="string">&quot;内蒙古自治区&quot;</span>: <span class="string">&quot;天苍苍，野茫茫，风吹草低见牛羊&quot;</span>,</span><br><span class="line"><span class="string">&quot;辽宁省&quot;</span>: <span class="string">&quot;我想吃烤鸡架！&quot;</span>,</span><br><span class="line"><span class="string">&quot;吉林省&quot;</span>: <span class="string">&quot;状元阁就是东北烧烤之王&quot;</span>,</span><br><span class="line"><span class="string">&quot;黑龙江省&quot;</span>: <span class="string">&quot;很喜欢哈尔滨大剧院&quot;</span>,</span><br><span class="line"><span class="string">&quot;上海市&quot;</span>: <span class="string">&quot;众所周知，中国只有两个城市&quot;</span>,</span><br><span class="line"><span class="string">&quot;江苏省&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;南京市&quot;</span>: <span class="string">&quot;这是我挺想去的城市啦&quot;</span>,</span><br><span class="line"><span class="string">&quot;苏州市&quot;</span>: <span class="string">&quot;上有天堂，下有苏杭&quot;</span>,</span><br><span class="line"><span class="string">&quot;其他&quot;</span>: <span class="string">&quot;散装是必须要散装的&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;浙江省&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;杭州市&quot;</span>: <span class="string">&quot;东风渐绿西湖柳，雁已还人未南归&quot;</span>,</span><br><span class="line"><span class="string">&quot;其他&quot;</span>: <span class="string">&quot;望海楼明照曙霞,护江堤白蹋晴沙&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;河南省&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;郑州市&quot;</span>: <span class="string">&quot;豫州之域，天地之中&quot;</span>,</span><br><span class="line"><span class="string">&quot;信阳市&quot;</span>: <span class="string">&quot;品信阳毛尖，悟人间芳华&quot;</span>,</span><br><span class="line"><span class="string">&quot;南阳市&quot;</span>: <span class="string">&quot;臣本布衣，躬耕于南阳此南阳非彼南阳！&quot;</span>,</span><br><span class="line"><span class="string">&quot;驻马店市&quot;</span>: <span class="string">&quot;峰峰有奇石，石石挟仙气嵖岈山的花很美哦！&quot;</span>,</span><br><span class="line"><span class="string">&quot;开封市&quot;</span>: <span class="string">&quot;刚正不阿包青天&quot;</span>,</span><br><span class="line"><span class="string">&quot;洛阳市&quot;</span>: <span class="string">&quot;洛阳牡丹甲天下&quot;</span>,</span><br><span class="line"><span class="string">&quot;其他&quot;</span>: <span class="string">&quot;可否带我品尝河南烩面啦？&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;安徽省&quot;</span>: <span class="string">&quot;蚌埠住了，芜湖起飞&quot;</span>,</span><br><span class="line"><span class="string">&quot;福建省&quot;</span>: <span class="string">&quot;井邑白云间，岩城远带山&quot;</span>,</span><br><span class="line"><span class="string">&quot;江西省&quot;</span>: <span class="string">&quot;落霞与孤鹜齐飞，秋水共长天一色&quot;</span>,</span><br><span class="line"><span class="string">&quot;山东省&quot;</span>: <span class="string">&quot;遥望齐州九点烟，一泓海水杯中泻&quot;</span>,</span><br><span class="line"><span class="string">&quot;湖北省&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;黄冈市&quot;</span>: <span class="string">&quot;红安将军县！辈出将才！&quot;</span>,</span><br><span class="line"><span class="string">&quot;其他&quot;</span>: <span class="string">&quot;来碗热干面~&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;湖南省&quot;</span>: <span class="string">&quot;74751，长沙斯塔克&quot;</span>,</span><br><span class="line"><span class="string">&quot;广东省&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;广州市&quot;</span>: <span class="string">&quot;看小蛮腰，喝早茶了嘛~&quot;</span>,</span><br><span class="line"><span class="string">&quot;深圳市&quot;</span>: <span class="string">&quot;今天你逛商场了嘛~&quot;</span>,</span><br><span class="line"><span class="string">&quot;阳江市&quot;</span>: <span class="string">&quot;阳春合水！博主家乡~ 欢迎来玩~&quot;</span>,</span><br><span class="line"><span class="string">&quot;其他&quot;</span>: <span class="string">&quot;来两斤福建人~&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;广西壮族自治区&quot;</span>: <span class="string">&quot;桂林山水甲天下&quot;</span>,</span><br><span class="line"><span class="string">&quot;海南省&quot;</span>: <span class="string">&quot;朝观日出逐白浪，夕看云起收霞光&quot;</span>,</span><br><span class="line"><span class="string">&quot;四川省&quot;</span>: <span class="string">&quot;康康川妹子&quot;</span>,</span><br><span class="line"><span class="string">&quot;贵州省&quot;</span>: <span class="string">&quot;茅台，学生，再塞200&quot;</span>,</span><br><span class="line"><span class="string">&quot;云南省&quot;</span>: <span class="string">&quot;玉龙飞舞云缠绕，万仞冰川直耸天&quot;</span>,</span><br><span class="line"><span class="string">&quot;西藏自治区&quot;</span>: <span class="string">&quot;躺在茫茫草原上，仰望蓝天&quot;</span>,</span><br><span class="line"><span class="string">&quot;陕西省&quot;</span>: <span class="string">&quot;来份臊子面加馍&quot;</span>,</span><br><span class="line"><span class="string">&quot;甘肃省&quot;</span>: <span class="string">&quot;羌笛何须怨杨柳，春风不度玉门关&quot;</span>,</span><br><span class="line"><span class="string">&quot;青海省&quot;</span>: <span class="string">&quot;牛肉干和老酸奶都好好吃&quot;</span>,</span><br><span class="line"><span class="string">&quot;宁夏回族自治区&quot;</span>: <span class="string">&quot;大漠孤烟直，长河落日圆&quot;</span>,</span><br><span class="line"><span class="string">&quot;新疆维吾尔自治区&quot;</span>: <span class="string">&quot;驼铃古道丝绸路，胡马犹闻唐汉风&quot;</span>,</span><br><span class="line"><span class="string">&quot;台湾省&quot;</span>: <span class="string">&quot;我在这头，大陆在那头&quot;</span>,</span><br><span class="line"><span class="string">&quot;香港特别行政区&quot;</span>: <span class="string">&quot;永定贼有残留地鬼嚎，迎击光非岁玉&quot;</span>,</span><br><span class="line"><span class="string">&quot;澳门特别行政区&quot;</span>: <span class="string">&quot;性感荷官，在线发牌&quot;</span>,</span><br><span class="line"><span class="string">&quot;其他&quot;</span>: <span class="string">&quot;带我去你的城市逛逛吧！&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;美国&quot;</span>: <span class="string">&quot;Let us live in peace!&quot;</span>,</span><br><span class="line"><span class="string">&quot;日本&quot;</span>: <span class="string">&quot;よろしく、一緒に桜を見ませんか&quot;</span>,</span><br><span class="line"><span class="string">&quot;俄罗斯&quot;</span>: <span class="string">&quot;干了这瓶伏特加！&quot;</span>,</span><br><span class="line"><span class="string">&quot;法国&quot;</span>: <span class="string">&quot;C&#x27;est La Vie&quot;</span>,</span><br><span class="line"><span class="string">&quot;德国&quot;</span>: <span class="string">&quot;Die Zeit verging im Fluge.&quot;</span>,</span><br><span class="line"><span class="string">&quot;澳大利亚&quot;</span>: <span class="string">&quot;一起去大堡礁吧！&quot;</span>,</span><br><span class="line"><span class="string">&quot;加拿大&quot;</span>: <span class="string">&quot;拾起一片枫叶赠予你&quot;</span>,</span><br><span class="line"><span class="string">&quot;其他&quot;</span>: <span class="string">&quot;带我去你的国家逛逛吧&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getGreeting</span> = (<span class="params">country, province, city</span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> countryGreeting = greetings[country] || greetings[<span class="string">&quot;其他&quot;</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> countryGreeting === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> countryGreeting;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> provinceGreeting = countryGreeting[province] || countryGreeting[<span class="string">&quot;其他&quot;</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> provinceGreeting === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> provinceGreeting;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> provinceGreeting[city] || provinceGreeting[<span class="string">&quot;其他&quot;</span>] || countryGreeting[<span class="string">&quot;其他&quot;</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getTimeGreeting</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> hour = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getHours</span>();</span><br><span class="line"><span class="keyword">if</span> (hour &lt; <span class="number">11</span>) <span class="keyword">return</span> <span class="string">&quot;早上好🌤️ ，一日之计在于晨&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (hour &lt; <span class="number">13</span>) <span class="keyword">return</span> <span class="string">&quot;中午好☀️ ，记得午休喔~&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (hour &lt; <span class="number">17</span>) <span class="keyword">return</span> <span class="string">&quot;下午好🕞 ，饮茶先啦！&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (hour &lt; <span class="number">19</span>) <span class="keyword">return</span> <span class="string">&quot;即将下班🚶‍♂️，记得按时吃饭~&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;晚上好🌙 ，夜生活嗨起来！&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">showErrorMessage</span> = (<span class="params">message = <span class="string">&#x27;抱歉，无法获取信息&#x27;</span></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> welcomeInfoElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;welcome-info&quot;</span>);</span><br><span class="line">welcomeInfoElement.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;error-message&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;error-icon&quot;&gt;😕&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;<span class="subst">$&#123;message&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;请&lt;i id=&quot;retry-button&quot; class=&quot;fa-solid fa-arrows-rotate&quot;&gt;&lt;/i&gt;重试或检查网络连接&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;retry-button&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, fetchIpInfo);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isHomePage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> === <span class="string">&#x27;/&#x27;</span> || <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> === <span class="string">&#x27;/index.html&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="title function_">addStyles</span>();</span><br><span class="line"><span class="title function_">insertAnnouncementComponent</span>();</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:complete&#x27;</span>, insertAnnouncementComponent);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;打开公告,注意缩进&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="侧边栏" scheme="https://blog.667408.xyz/tags/%E4%BE%A7%E8%BE%B9%E6%A0%8F/"/>
    
    <category term="个性定位" scheme="https://blog.667408.xyz/tags/%E4%B8%AA%E6%80%A7%E5%AE%9A%E4%BD%8D/"/>
    
  </entry>
  
  <entry>
    <title>添加轻量朋友圈</title>
    <link href="https://blog.667408.xyz/posts/15edad24.html"/>
    <id>https://blog.667408.xyz/posts/15edad24.html</id>
    <published>2024-10-31T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一步本地生成-Json-文件"><a href="#第一步本地生成-Json-文件" class="headerlink" title="第一步本地生成 Json 文件"></a>第一步本地生成 Json 文件</h1><ul><li>在博客目录下添加文件 <code>link.js</code>,粘贴以下代码：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const YML = require(&#x27;yamljs&#x27;)  </span><br><span class="line">const fs = require(&#x27;fs&#x27;)  </span><br><span class="line">  </span><br><span class="line">const blacklist = [&quot;友站名称1&quot;, &quot;友站名称2&quot;, &quot;友站名称3&quot;]; // 由于某种原因，不想订阅的列表  </span><br><span class="line">  </span><br><span class="line">let friends = [],  </span><br><span class="line">    data_f = YML.parse(fs.readFileSync(&#x27;source/_data/link.yml&#x27;).toString().replace(/(?&lt;=rss:)\s*\n/g, &#x27; &quot;&quot;\n&#x27;));  </span><br><span class="line">  </span><br><span class="line">data_f.forEach((entry, index) =&gt; &#123;  </span><br><span class="line">    let lastIndex = 2; // 想订阅几个分组就改成几个  </span><br><span class="line">    if (index &lt; lastIndex) &#123;  </span><br><span class="line">        const filteredLinkList = entry.link_list.filter(linkItem =&gt; !blacklist.includes(linkItem.name));  </span><br><span class="line">        friends = friends.concat(filteredLinkList);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">  </span><br><span class="line">// 根据规定的格式构建 JSON 数据  </span><br><span class="line">const friendData = &#123;  </span><br><span class="line">    friends: friends.map(item =&gt; &#123;  </span><br><span class="line">        return [item.name, item.link, item.avatar];  </span><br><span class="line">    &#125;)  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line">// 将 JSON 对象转换为字符串  </span><br><span class="line">const friendJSON = JSON.stringify(friendData, null, 2);  </span><br><span class="line">  </span><br><span class="line">// 写入 friend.json 文件  </span><br><span class="line">fs.writeFileSync(&#x27;./source/friend.json&#x27;, friendJSON);  </span><br><span class="line">  </span><br><span class="line">console.log(&#x27;friend.json 文件已生成。&#x27;);</span><br></pre></td></tr></table></figure><ul><li>终端执行：安装依赖</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install yamljs</span><br></pre></td></tr></table></figure><ul><li>终端执行 (新增了友链就需要执行)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node link.js</span><br></pre></td></tr></table></figure><ul><li>然后在根目录会多出一个 <code>friend.json</code>,复制一份出来，保存到任意地方</li><li>或者推送上线，使用 https:&#x2F;&#x2F;博客域名&#x2F;friend.json</li></ul><hr><h1 id="第二步：Fork-项目"><a href="#第二步：Fork-项目" class="headerlink" title="第二步：Fork 项目"></a>第二步：Fork 项目</h1><p><a href="https://github.com/willow-god/Friend-Circle-Lite">Friend-Circle-Lite</a></p><ul><li>把第一步生成的 <code>friend.json</code> 副本上传到你自己仓库里面,获取文件直链<br><img src="https://img.667408.xyz/2024/11/01/443311.png" alt="443311.png"></li><li>如果是推送之后的情况不需要上传，直接用 https:&#x2F;&#x2F;博客域名&#x2F;friend.json</li><li>打开仓库的 <code>conf.yaml</code> 文件，把刚才的直连地址替换了</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spider_settings:  </span><br><span class="line">  enable: true  </span><br><span class="line">  # 将json_url替换为你刚刚生成的 friend.json 的直链地址，或者https://博客域名/friend.json，必须推送上线过，这个地址才有效  </span><br><span class="line">  json_url: &quot;https://raw.githubusercontent.com/yourname/yourepo/refs/heads/main/friend.json&quot;  </span><br><span class="line">  article_count: 5  </span><br><span class="line">  merge_result:  </span><br><span class="line">    enable: false  </span><br><span class="line">    # merge_json_url 这里可以合并其他人的API接口，后面会讲到，这个地址就是 cf pages 部署出来的 API 服务地址，不会用就不要管他，不要乱改  </span><br><span class="line">    merge_json_url: &quot;https://fc.liushen.fun&quot;v</span><br></pre></td></tr></table></figure><hr><h1 id="第三步：开启-Github-工作流"><a href="#第三步：开启-Github-工作流" class="headerlink" title="第三步：开启 Github 工作流"></a>第三步：开启 Github 工作流</h1><p><img src="https://img.667408.xyz/2024/11/01/869350.png" alt="869350.png"></p><ul><li>不一样就点同意开启，跑完之后切换对应的分支看看 <code>all.json</code> 内容,如果正常就进行下一步<br><img src="https://img.667408.xyz/2024/11/01/904464.png" alt="904464.png"></li></ul><hr><h1 id="部署项目"><a href="#部署项目" class="headerlink" title="部署项目"></a>部署项目</h1><ul><li><a href="https://dash.cloudflare.com/">cloudflare</a> 的话，直接 <code>page</code> 部署的时候选择 <code>page</code> 分支，过会打开这样就说明成功了<br><img src="https://img.667408.xyz/2024/11/01/230769.png" alt="230769.png"></li><li><a href="https://vercel.com/">vercel</a> 部署就比较麻烦一点，但是推荐，速度快，先正常部署，然后切换成 <code>page</code> 分支再部署一次<br><img src="https://img.667408.xyz/2024/11/01/915016.png" alt="915016.png"><br><img src="https://img.667408.xyz/2024/11/02/161962.png" alt="161962.png"><br><img src="https://img.667408.xyz/2024/11/02/836320.png" alt="836320.png"><br>跑完之后点击分配的域名查看是否正常<br><img src="https://img.667408.xyz/2024/11/01/230769.png" alt="230769.png"></li><li>没问题的话，这二个方式上 <code>自定义域</code>,仅 DNS 即可，https:&#x2F;&#x2F;自定义域&#x2F;</li></ul><hr><h1 id="创建朋友圈页面"><a href="#创建朋友圈页面" class="headerlink" title="创建朋友圈页面"></a>创建朋友圈页面</h1><ul><li>本来有可以不建</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page fcircle</span><br></pre></td></tr></table></figure><ul><li><code>source\fcircle\index.md</code> 替换</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---  </span><br><span class="line">title: 朋友圈  </span><br><span class="line">comments: false  </span><br><span class="line">aside: false  </span><br><span class="line">top_img: false  </span><br><span class="line">type: &quot;fcircle&quot;  </span><br><span class="line">---</span><br></pre></td></tr></table></figure><ul><li>替换 <code>themes\anzhiyu\layout\includes\page\fcircle.pug</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">if theme.friends_lite.enable  </span><br><span class="line">  link(rel=&quot;stylesheet&quot;, href=theme.friends_lite.fclite_css_url)  </span><br><span class="line">  style.  </span><br><span class="line">    #random-article &#123;  </span><br><span class="line">      display: none!important;  </span><br><span class="line">    &#125;  </span><br><span class="line">    .card:hover,  </span><br><span class="line">    #random-article:hover &#123;  </span><br><span class="line">      border: var(--style-border-hover)!important;  </span><br><span class="line">    &#125;  </span><br><span class="line">    #modal-author-name-link,  </span><br><span class="line">    .modal-article .modal-article-title:hover,  </span><br><span class="line">    .card-title:hover&#123;  </span><br><span class="line">      color: var(--anzhiyu-theme)!important;  </span><br><span class="line">    &#125;  </span><br><span class="line">    .modal-article,  </span><br><span class="line">    #modal-articles-container &#123;  </span><br><span class="line">      border-top-color: var(--anzhiyu-theme)!important;  </span><br><span class="line">      border-bottom-color: var(--anzhiyu-theme)!important;  </span><br><span class="line">    &#125;  </span><br><span class="line">    #load-more-btn:hover &#123;  </span><br><span class="line">      background: var(--anzhiyu-theme)!important;  </span><br><span class="line">    &#125;  </span><br><span class="line">  .fcircle_page  </span><br><span class="line">    .author-content.author-content-item.fcirclePage.single(style=`background: url($&#123;theme.friends_lite.top_background&#125;) center / cover no-repeat !important;`)  </span><br><span class="line">      .card-content  </span><br><span class="line">        .author-content-item-tips 朋友圈  </span><br><span class="line">        span.author-content-item-title 最新文章订阅  </span><br><span class="line">        .content-bottom  </span><br><span class="line">          .tips= theme.friends_lite.top_tips  </span><br><span class="line">        .banner-button-group  </span><br><span class="line">          a.banner-button(onclick=&#x27;pjax.loadUrl(&quot;/about&quot;)&#x27;)  </span><br><span class="line">            i.anzhiyufont.anzhiyu-icon-arrow-circle-right(style=&#x27;font-size: 22px; margin-right: 0.25rem&#x27;)  </span><br><span class="line">            span.banner-button-text 关于本人  </span><br><span class="line">    .title-h2-a  </span><br><span class="line">      .title-h2-a-left  </span><br><span class="line">        h2(style=&#x27;padding-top:0;margin:rem 0 rem&#x27;) 🎣 钓鱼  </span><br><span class="line">        a.random-post-start(href=&#x27;javascript:fetchRandomPost();&#x27;)  </span><br><span class="line">          i.anzhiyufont.anzhiyu-icon-arrow-rotate-right  </span><br><span class="line">      .title-h2-a-right  </span><br><span class="line">        a.random-post-all(href=&#x27;/link/&#x27;) 全部友链  </span><br><span class="line">    #random-post  </span><br><span class="line">    .title-h2-a  </span><br><span class="line">      .title-h2-a-left  </span><br><span class="line">        h2 🐟 鱼塘  </span><br><span class="line">    #friend-circle-lite-root  </span><br><span class="line">  </span><br><span class="line">  script.  </span><br><span class="line">    if (typeof UserConfig === &#x27;undefined&#x27;) &#123;  </span><br><span class="line">        var UserConfig = &#123;  </span><br><span class="line">        private_api_url: &#x27;#&#123;theme.friends_lite.private_api_url&#125;&#x27;,  </span><br><span class="line">        page_turning_number: #&#123;theme.friends_lite.page_turning_number&#125;,  </span><br><span class="line">        error_img: &#x27;#&#123;theme.friends_lite.error_img&#125;&#x27;  </span><br><span class="line">      &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  script(src=theme.friends_lite.fclite_js_url)  </span><br><span class="line">  script(defer data-pjax src=url_for(theme.asset.random_friends_post_js))</span><br></pre></td></tr></table></figure><ul><li>替换 <code>themes\anzhiyu\source\js\anzhiyu\random_friends_post.js</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line">var fdata = &#123; defaultFish: 100, hungryFish: 100 &#125;;  </span><br><span class="line">if (typeof fdataUser !== &quot;undefined&quot;) &#123;  </span><br><span class="line">  for (var key in fdataUser) &#123;  </span><br><span class="line">    if (fdataUser[key]) fdata[key] = fdataUser[key];  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">var randomPostTimes = 0;  </span><br><span class="line">var randomPostWorking = false;  </span><br><span class="line">var randomPostTips = [  </span><br><span class="line">  &quot;钓到了绝世好文！&quot;,  </span><br><span class="line">  &quot;在河边打了个喷嚏，吓跑了&quot;,  </span><br><span class="line">  &quot;你和小伙伴抢夺着&quot;,  </span><br><span class="line">  &quot;你击败了巨龙，在巢穴中发现了&quot;,  </span><br><span class="line">  &quot;挖掘秦始皇坟时找到了&quot;,  </span><br><span class="line">  &quot;在路边闲逛的时候随手买了一个&quot;,  </span><br><span class="line">  &quot;从学校班主任那拿来了孩子上课偷偷看的&quot;,  </span><br><span class="line">  &quot;你的同桌无情的从你的语文书中撕下了那篇你最喜欢的&quot;,  </span><br><span class="line">  &quot;考古学家近日发现了&quot;,  </span><br><span class="line">  &quot;外星人降临地球学习地球文化，落地时被你塞了&quot;,  </span><br><span class="line">  &quot;从图书馆顶层的隐秘角落里发现了闪着金光的&quot;,  </span><br><span class="line">  &quot;徒弟修炼走火入魔，为师立刻掏出了&quot;,  </span><br><span class="line">  &quot;在大山中唱山歌，隔壁的阿妹跑来了，带着&quot;,  </span><br><span class="line">  &quot;隔壁家的孩子数学考了满分，都是因为看了&quot;,  </span><br><span class="line">  &quot;隔壁家的孩子英语考了满分，都是因为看了&quot;,  </span><br><span class="line">  &quot;小米研发了全新一代MIX手机，据说灵感&quot;,  </span><br><span class="line">  &quot;修炼渡劫成功，还好提前看了&quot;,  </span><br><span class="line">  &quot;库克坐上了苹果CEO的宝座，因为他面试的时候看了&quot;,  </span><br><span class="line">  &quot;阿里巴巴大喊芝麻开门，映入眼帘的就是&quot;,  </span><br><span class="line">  &quot;师傅说练武要先炼心，然后让我好生研读&quot;,  </span><br><span class="line">  &quot;科考队在南极大陆发现了被冰封的&quot;,  </span><br><span class="line">  &quot;飞机窗户似乎被一张纸糊上了，仔细一看是&quot;,  </span><br><span class="line">  &quot;历史上满写的仁义道德四个字，透过字缝里却全是&quot;,  </span><br><span class="line">  &quot;十几年前的录音机似乎还能够使用，插上电发现正在播的是&quot;,  </span><br><span class="line">  &quot;新版语文书拟增加一篇熟读并背诵的&quot;,  </span><br><span class="line">  &quot;经调查，99%的受访者都没有背诵过&quot;,  </span><br><span class="line">  &quot;今年的高考满分作文是&quot;,  </span><br><span class="line">  &quot;唐僧揭开了佛祖压在五指山上的&quot;,  </span><br><span class="line">  &quot;科学家发现能够解决衰老的秘密，就是每日研读&quot;,  </span><br><span class="line">  &quot;英特尔发布了全新的至强处理器，其芯片的制造原理都是&quot;,  </span><br><span class="line">  &quot;新的iPhone产能很足，新的进货渠道是&quot;,  </span><br><span class="line">  &quot;今年亩产突破了八千万斤，多亏了&quot;,  </span><br><span class="line">  &quot;陆隐一统天上宗，在无数祖境高手的目光下宣读了&quot;,  </span><br><span class="line">  &quot;黑钻风跟白钻风说道，吃了唐僧肉能长生不老，他知道是因为看了&quot;,  </span><br><span class="line">  &quot;上卫生间没带纸，直接提裤跑路也不愿意玷污手中&quot;,  </span><br><span class="line">  &quot;种下一篇文章就会产生很多很多文章，我种下了&quot;,  </span><br><span class="line">  &quot;三十年河东，三十年河西，莫欺我没有看过&quot;,  </span><br><span class="line">  &quot;踏破铁血无觅处，得来全靠&quot;,  </span><br><span class="line">  &quot;今日双色球中了两千万，预测全靠&quot;,  </span><br><span class="line">  &quot;因为卷子上没写名字，老师罚抄&quot;,  </span><br><span class="line">  &quot;为了抗议世间的不公，割破手指写下了&quot;,  </span><br><span class="line">  &quot;在艺术大街上被贴满了相同的纸，走近一看是&quot;,  </span><br><span class="line">  &quot;这区区迷阵岂能难得住我？其实能走出来多亏了&quot;,  </span><br><span class="line">  &quot;今日被一篇文章顶上了微博热搜，它是&quot;,  </span><br><span class="line">  &quot;你送给乞丐一个暴富秘籍，它是&quot;,  </span><br><span class="line">  &quot;UZI一个走A拿下五杀，在事后采访时说他当时回想起了&quot;,  </span><br><span class="line">  &quot;科学家解刨了第一个感染丧尸病毒的人，发现丧尸抗体存在于&quot;,  </span><br><span class="line">  &quot;如果你有梦想的话，就要努力去看&quot;,  </span><br><span class="line">  &quot;决定我们成为什么样人的，不是我们的能力，而是是否看过&quot;,  </span><br><span class="line">  &quot;有信心不一定会成功，没信心就去看&quot;,  </span><br><span class="line">  &quot;你真正是谁并不重要，重要的是你看没看过&quot;,  </span><br><span class="line">  &quot;玄天境重要的是锻体，为师赠你此书，好好修炼去吧，这是&quot;,  </span><br><span class="line">  &quot;上百祖境高手在天威湖大战三天三夜为了抢夺&quot;,  </span><br><span class="line">  &quot;这化仙池水乃上古真仙对后人的考校，要求熟读并背诵&quot;,  </span><br><span class="line">  &quot;庆氏三千年根基差点竟被你小子毁于一旦，能够被我拯救全是因为我看了&quot;,  </span><br><span class="line">  &quot;我就是神奇宝贝大师！我这只皮卡丘可是&quot;,  </span><br><span class="line">  &quot;我就是神奇宝贝大师！我这只小火龙可是&quot;,  </span><br><span class="line">  &quot;我就是神奇宝贝大师！我这只可达鸭可是&quot;,  </span><br><span class="line">  &quot;我就是神奇宝贝大师！我这只杰尼龟可是&quot;,  </span><br><span class="line">  &quot;上古遗迹中写道，只要习得此书，便得成功。你定睛一看，原来是&quot;,  </span><br><span class="line">  &quot;奶奶的，玩阴的是吧，我就是双料特工代号穿山甲，&quot;,  </span><br><span class="line">  &quot;你的背景太假了，我的就逼真多了，学到这个技术全是因为看了&quot;,  </span><br><span class="line">  &quot;我是云南的，云南怒江的，怒江芦水市，芦水市六库，六库傈僳族，傈僳族是&quot;,  </span><br><span class="line">  &quot;我真的栓Q了，我真的会谢如果你看&quot;,  </span><br><span class="line">  &quot;你已经习得退退退神功，接下来的心法已经被记录在&quot;,  </span><br><span class="line">  &quot;人生无常大肠包小肠，小肠包住了&quot;,  </span><br><span class="line">  &quot;你抽到了普通文章，它是&quot;,  </span><br><span class="line">  &quot;你收到了稀有文章，它是&quot;,  </span><br><span class="line">  &quot;你抽到了金色普通文章，它是&quot;,  </span><br><span class="line">  &quot;你抽到了金色稀有文章，它是&quot;,  </span><br><span class="line">  &quot;你抽到了传说文章！它是&quot;,  </span><br><span class="line">  &quot;哇！金色传说！你抽到了金色传说文章，它是&quot;,  </span><br><span class="line">  &quot;报告！侦察兵说在前往300米有一个男子在偷偷看一本书，上面赫然写着&quot;,  </span><br><span class="line">  &quot;芷莲姑娘大摆擂台，谁若是能读完此书，便可娶了她。然后从背后掏出了&quot;,  </span><br><span class="line">  &quot;请问你的梦想是什么？我的梦想是能读到&quot;,  </span><br><span class="line">  &quot;读什么才能增智慧？当然是读&quot;,  </span><br><span class="line">  &quot;纳兰嫣然掏出了退婚书，可是发现出门带错了，结果拿出了一本&quot;,  </span><br><span class="line">  &quot;你要尽全力保护你的梦想。那些嘲笑你的人，他们必定会失败，他们想把你变成和他们一样的人。如果你有梦想的话，就要努力去读&quot;,  </span><br><span class="line">  &quot;走人生的路就像爬山一样，看起来走了许多冤枉的路，崎岖的路，但终究需要读完&quot;,  </span><br><span class="line">  &quot;游戏的规则就是这么的简单，你听懂了吗？管你听没听懂，快去看&quot;,  </span><br><span class="line">];  </span><br><span class="line">  </span><br><span class="line">var randomPostClick = 0;  </span><br><span class="line">  </span><br><span class="line">function fetchRandomPost() &#123;  </span><br><span class="line">  if (!document.getElementById(&quot;random-post&quot;)) return;  </span><br><span class="line">  if (randomPostWorking) return;  </span><br><span class="line">  randomPostWorking = true;  </span><br><span class="line">  </span><br><span class="line">  let randomRotate = randomPostTimes * 360;  </span><br><span class="line">  let randomPostTipsItem = randomPostTips[Math.floor(Math.random() * randomPostTips.length)];  </span><br><span class="line">  let randomPostLevel = getRandomPostLevel(randomPostTimes);  </span><br><span class="line">  </span><br><span class="line">  document.getElementById(&quot;random-post&quot;).innerHTML = randomPostTimes &gt;= 5 ?  </span><br><span class="line">    `钓鱼中… （Lv.` + randomPostTimes + ` 当前称号：` + randomPostLevel + `）` :  </span><br><span class="line">    `钓鱼中…`;  </span><br><span class="line">  </span><br><span class="line">  let randomTime = randomPostTimes == 0 ? 0 : randomNum(1000, 3000);  </span><br><span class="line">  </span><br><span class="line">  document.querySelector(&quot;.random-post-start&quot;).style.opacity = &quot;0.2&quot;;  </span><br><span class="line">  document.querySelector(&quot;.random-post-start&quot;).style.transitionDuration = &quot;0.3s&quot;;  </span><br><span class="line">  document.querySelector(&quot;.random-post-start&quot;).style.transform = &quot;rotate(&quot; + randomRotate + &quot;deg)&quot;;  </span><br><span class="line">  </span><br><span class="line">  if (randomPostClick * fdata.hungryFish + fdata.defaultFish &lt; randomPostTimes &amp;&amp; Math.round(Math.random()) == 0) &#123;  </span><br><span class="line">    document.getElementById(&quot;random-post&quot;).innerHTML =  </span><br><span class="line">      &quot;因为只钓鱼不吃鱼，过分饥饿导致本次钓鱼失败…(点击任意一篇钓鱼获得的文章即可恢复）&quot;;  </span><br><span class="line">    randomPostWorking = false;  </span><br><span class="line">  &#125; else &#123;  </span><br><span class="line">    fetch(UserConfig.private_api_url + &#x27;all.json&#x27;)  </span><br><span class="line">      .then(res =&gt; res.json())  </span><br><span class="line">      .then(json =&gt; &#123;  </span><br><span class="line">        let randomArticle = json.article_data[Math.floor(Math.random() * json.article_data.length)];  </span><br><span class="line">        let &#123; title, link, author &#125; = randomArticle;  </span><br><span class="line">        window.setTimeout(() =&gt; &#123;  </span><br><span class="line">          document.getElementById(&quot;random-post&quot;).innerHTML =  </span><br><span class="line">            randomPostTipsItem +  </span><br><span class="line">            `来自友链 &lt;b&gt;` +  </span><br><span class="line">            author +  </span><br><span class="line">            `&lt;/b&gt; 的文章：&lt;a class=&quot;random-friends-post&quot; onclick=&quot;randomClickLink()&quot; target=&quot;_blank&quot; href=&quot;` +  </span><br><span class="line">            link +  </span><br><span class="line">            `&quot; rel=&quot;external nofollow&quot;&gt;` +  </span><br><span class="line">            title +  </span><br><span class="line">            `&lt;/a&gt;`;  </span><br><span class="line">          randomPostTimes += 1;  </span><br><span class="line">          localStorage.setItem(&quot;randomPostTimes&quot;, randomPostTimes);  </span><br><span class="line">          document.querySelector(&quot;.random-post-start&quot;).style.opacity = &quot;1&quot;;  </span><br><span class="line">        &#125;, randomTime);  </span><br><span class="line">      &#125;)  </span><br><span class="line">      .catch(error =&gt; &#123;  </span><br><span class="line">        console.error(&#x27;Error fetching data:&#x27;, error);  </span><br><span class="line">        document.getElementById(&quot;random-post&quot;).innerHTML = &quot;获取文章失败，请稍后再试。&quot;;  </span><br><span class="line">      &#125;)  </span><br><span class="line">      .finally(() =&gt; &#123;  </span><br><span class="line">        randomPostWorking = false;  </span><br><span class="line">      &#125;);  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">function initRandomPost() &#123;  </span><br><span class="line">  if (localStorage.randomPostTimes) &#123;  </span><br><span class="line">    randomPostTimes = parseInt(localStorage.randomPostTimes);  </span><br><span class="line">    randomPostClick = parseInt(localStorage.randomPostClick);  </span><br><span class="line">    document.querySelector(&quot;.random-post-start&quot;).style.transitionDuration = &quot;0.3s&quot;;  </span><br><span class="line">    document.querySelector(&quot;.random-post-start&quot;).style.transform = &quot;rotate(&quot; + 360 * randomPostTimes + &quot;deg)&quot;;  </span><br><span class="line">  &#125;  </span><br><span class="line">  fetchRandomPost();  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">function randomClickLink() &#123;  </span><br><span class="line">  randomPostClick += 1;  </span><br><span class="line">  localStorage.setItem(&quot;randomPostClick&quot;, randomPostClick);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">function randomNum(minNum, maxNum) &#123;  </span><br><span class="line">  return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">function getRandomPostLevel(times) &#123;  </span><br><span class="line">  if (times &gt; 10000) return &quot;愿者上钩&quot;;  </span><br><span class="line">  if (times &gt; 1000) return &quot;俯览天下&quot;;  </span><br><span class="line">  if (times &gt; 100) return &quot;绝世渔夫&quot;;  </span><br><span class="line">  if (times &gt; 75) return &quot;钓鱼王者&quot;;  </span><br><span class="line">  if (times &gt; 50) return &quot;钓鱼宗师&quot;;  </span><br><span class="line">  if (times &gt; 20) return &quot;钓鱼专家&quot;;  </span><br><span class="line">  if (times &gt; 5) return &quot;钓鱼高手&quot;;  </span><br><span class="line">  return &quot;钓鱼新手&quot;;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">initRandomPost();</span><br></pre></td></tr></table></figure><hr><h1 id="适配友链的钓鱼"><a href="#适配友链的钓鱼" class="headerlink" title="适配友链的钓鱼"></a>适配友链的钓鱼</h1><ul><li>修改 <code>themes\anzhiyu\layout\includes\page\flink.pug</code></li><li>这二个替换很 <code>关键</code>，缩进和原来的对比一下</li><li>搜索 <code>#random-post</code> 修改为下面所示</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#random-post  </span><br><span class="line">script(defer data-pjax src=url_for(theme.asset.random_friends_post_js))  </span><br><span class="line">script.  </span><br><span class="line">  if (typeof UserConfig === &#x27;undefined&#x27;) &#123;  </span><br><span class="line">    var UserConfig = &#123;  </span><br><span class="line">      private_api_url: &#x27;#&#123;theme.friends_lite.private_api_url&#125;&#x27;,  </span><br><span class="line">      page_turning_number: #&#123;theme.friends_lite.page_turning_number&#125;,  </span><br><span class="line">      error_img: &#x27;#&#123;theme.friends_lite.error_img&#125;&#x27;  </span><br><span class="line">    &#125;  </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ul><li>搜索 <code>.banner-button-group</code> 修改为以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.banner-button-group  </span><br><span class="line">  if (theme.friends_lite.private_api_url)</span><br></pre></td></tr></table></figure><ul><li>最后在 <code>_config.anzhiyu.yml</code> 底部添加</li><li>前面的后端 <code>API</code> 自定义域就填这里</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Lite朋友圈配置</span><br><span class="line">friends_lite:</span><br><span class="line">  enable: true</span><br><span class="line">  fclite_css_url: 前面步骤获取的API/main/fclite.css  # 轻量朋友圈的CSS</span><br><span class="line">  fclite_js_url: 前面步骤获取的API/main/fclite.js    # 轻量朋友圈的js</span><br><span class="line">  private_api_url: 前面步骤获取的API/               # 获取json的API URL  </span><br><span class="line">  page_turning_number: 20                              # 每页显示的文章数量  </span><br><span class="line">  error_img: 图片链接  # 404图片 URL  </span><br><span class="line">  top_background: 图片链接  # 顶部背景图片 URL  </span><br><span class="line">  top_tips: 使用 轻量友链朋友圈 订阅友链最新文章        # 顶部提示文本</span><br></pre></td></tr></table></figure><hr><h1 id="可能出现的问题"><a href="#可能出现的问题" class="headerlink" title="可能出现的问题"></a>可能出现的问题</h1><ul><li>如果友链里面的钓鱼没显示，就打开</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 朋友圈配置  </span><br><span class="line">friends_vue:  </span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><p>参考了 3 位大佬的<br><a href="https://blog.811520.xyz/post/2024/10/anzhiyu-friend-rss/">安知鱼主题朋友圈配置心得 | 青云志</a><br><a href="https://blog.liushen.fun/posts/4dc716ec/">Friend-Circle-Lite:轻量友链朋友圈 | LiuShen’s Blog</a><br><a href="https://blog.bsgun.cn/posts/1e0a6e20/">魔改主题兼容轻量友链朋友圈 | 梦爱吃鱼</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一步本地生成-Json-文件&quot;&gt;&lt;a href=&quot;#第一步本地生成-Json-文件&quot; class=&quot;headerlink&quot; title=&quot;第一步本地生成 Json 文件&quot;&gt;&lt;/a&gt;第一步本地生成 Json 文件&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;在博客目录下添加文件 &lt;</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="朋友圈" scheme="https://blog.667408.xyz/tags/%E6%9C%8B%E5%8F%8B%E5%9C%88/"/>
    
  </entry>
  
  <entry>
    <title>添加网站安全跳转</title>
    <link href="https://blog.667408.xyz/posts/6ace5a67.html"/>
    <id>https://blog.667408.xyz/posts/6ace5a67.html</id>
    <published>2024-10-29T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>插件地址：<a href="https://github.com/willow-god/hexo-safego/">hexo-safego</a></p><h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>安装 <code>cheerio</code> 库</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install cheerio --save</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>安装 <code>hexo-safego</code> 插件</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install hexo-safego --save</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h1><ul><li>在 hexo 根目录的 _config.yml 文件中添加以下配置：</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 插件配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo-safego安全跳转插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># see https://blog.qyliu.top/posts/1dfd1f41/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">hexo_safego:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 是否启用 hexo-safego 插件</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">enable_base64_encode:</span> <span class="literal">true</span>  <span class="comment"># 是否启用 Base64 编码链接</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">enable_target_blank:</span> <span class="literal">true</span>  <span class="comment"># 是否在跳转链接中添加 target=&quot;_blank&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">url_param_name:</span> <span class="string">&#x27;url&#x27;</span>  <span class="comment"># URL 参数名，用于生成跳转链接</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">html_file_name:</span> <span class="string">&#x27;go.html&#x27;</span>  <span class="comment"># 跳转页面文件名</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">ignore_attrs:</span>  <span class="comment"># 需要忽略的链接属性列表</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;data-fancybox&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">apply_containers:</span>  <span class="comment"># 容器 ID 列表，如果为空则匹配整个 body</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;#article-container&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">domain_whitelist:</span>  <span class="comment"># 域名白名单列表，包含白名单中的域名的链接将被忽略</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;blog.667408.xyz&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">apply_pages:</span>  <span class="comment"># 生效页面路径列表，只有在这些页面上才会对链接进行处理</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;/posts/&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">https://images.lwtools.online/i/2024/07/23/807114.webp</span>  <span class="comment"># 头像图片链接</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&quot;弈鸣小筑&quot;</span>  <span class="comment"># 标题</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&quot;安全中心&quot;</span>  <span class="comment"># 副标题</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">darkmode:</span> <span class="literal">true</span>  <span class="comment"># 是否启用夜间模式</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">debug:</span> <span class="literal">false</span>  <span class="comment"># 是否启用调试模式，开启后会输出详细的调试信息</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="本地三连预览"><a href="#本地三连预览" class="headerlink" title="本地三连预览"></a>本地三连预览</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">hexo clean; hexo g; hexo s</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;插件地址：&lt;a href=&quot;https://github.com/willow-god/hexo-safego/&quot;&gt;hexo-safego&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="安全跳转" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E5%85%A8%E8%B7%B3%E8%BD%AC/"/>
    
  </entry>
  
  <entry>
    <title>增加一个本站日志</title>
    <link href="https://blog.667408.xyz/posts/f09d628c.html"/>
    <id>https://blog.667408.xyz/posts/f09d628c.html</id>
    <published>2024-10-28T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><p>在<code>_config.anzhiyu.yml</code>下的<code>menu:</code>添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">关于:</span> </span><br><span class="line">  <span class="string">关于本人:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">anzhiyu-icon-paper-plane</span></span><br><span class="line">  <span class="string">想做的事:</span> <span class="string">/todolist/</span> <span class="string">||</span> <span class="string">anzhiyu-icon-stream</span></span><br><span class="line">  <span class="string">本站日志:</span> <span class="string">/update/</span> <span class="string">||</span> <span class="string">anzhiyu-icon-bolt</span>  <span class="comment"># 没有就新建一个</span></span><br></pre></td></tr></table></figure><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>新建本站日志分类页</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Hexo new page update</span><br><span class="line">```md</span><br><span class="line">---</span><br><span class="line">title: 更新日志</span><br><span class="line"><span class="built_in">date</span>: 2024-09-23 00:00:00</span><br><span class="line"><span class="built_in">type</span>: update</span><br><span class="line">comments: <span class="literal">false</span></span><br><span class="line">aside: <span class="literal">false</span></span><br><span class="line">top_img: <span class="literal">false</span></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&#123;% tip home %&#125;本站日记是后面建的，前面有些时间对不上可能&#123;% endtip %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% timeline 2024 %&#125;</span><br><span class="line"><span class="comment"># &lt;!-- timeline 09-23 --&gt;</span></span><br><span class="line"><span class="comment"># 更新内容</span></span><br><span class="line"><span class="comment"># &lt;!-- endtimeline --&gt;</span></span><br><span class="line">&lt;!-- timeline 10-29 --&gt;</span><br><span class="line">[增加网站统计](https://blog.667408.xyz/posts/263c605d)</span><br><span class="line">[文章改成永久链接](https://blog.667408.xyz/posts/614e46f9)</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 10-28 --&gt;</span><br><span class="line">[友人帐换了一个样式](https://blog.667408.xyz/posts/936c664c)</span><br><span class="line">[增加页脚动物园](https://blog.667408.xyz/posts/15b5a328)</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 10-08 --&gt;</span><br><span class="line">[增加来访者信息](https://blog.667408.xyz/posts/2370fd62)</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 10-07 --&gt;</span><br><span class="line">[把博客源码上传到github](https://blog.667408.xyz/posts/c6ad5cda)</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 09-27 --&gt;</span><br><span class="line">[添加追番页面](https://blog.667408.xyz/posts/e3ca322b)</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 09-26 --&gt;</span><br><span class="line">[增加了文章卡片的擦亮动画](https://blog.667408.xyz/posts/7208a5f5)</span><br><span class="line">[添加待办清单](https://blog.667408.xyz/posts/b47abf66)</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 09-25 --&gt;</span><br><span class="line">[添加游戏收藏页](https://blog.667408.xyz/posts/a4d0465e)</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 09-23 --&gt;</span><br><span class="line">本站诞生日</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h1><ul><li>在<code>source/_data</code>下新建<code>update.yml</code>文件，并添加以下内容：</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">top_background:</span> <span class="string">&quot;https://s11.ax1x.com/2023/12/20/pioqoNT.jpg&quot;</span></span><br><span class="line">  <span class="attr">class_name:</span> <span class="string">&quot;日志&quot;</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">&quot;本站日志&quot;</span></span><br><span class="line">  <span class="attr">tip:</span> <span class="string">&quot;这里是本站的更新日志&quot;</span></span><br><span class="line">  <span class="attr">buttonLink:</span> <span class="string">&quot;https://blog.667408.xyz/about/&quot;</span></span><br><span class="line">  <span class="attr">buttonText:</span> <span class="string">&quot;关于本站&quot;</span></span><br></pre></td></tr></table></figure><hr><h1 id="第四步"><a href="#第四步" class="headerlink" title="第四步"></a>第四步</h1><ul><li>在<code>themes/anzhiyu/layout/page.pug</code>中添加以下内容,注意缩进对应，+是给你看的，记得删除</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">      when &#x27;music&#x27;</span><br><span class="line">        include includes/page/music.pug</span><br><span class="line">      when &#x27;todolist&#x27;</span><br><span class="line">        include includes/page/todolist.pug</span><br><span class="line">      when &#x27;games&#x27;</span><br><span class="line">        include includes/page/games.pug</span><br><span class="line">      when &#x27;envelope&#x27;</span><br><span class="line">        include includes/page/envelope.pug</span><br><span class="line">+      when &#x27;update&#x27;     </span><br><span class="line">+        include includes/page/update.pug</span><br></pre></td></tr></table></figure><hr><h1 id="第五步"><a href="#第五步" class="headerlink" title="第五步"></a>第五步</h1><ul><li>在<code>themes/anzhiyu/layout/includes/page</code>下新建<code>update.pug</code>文件，并添加以下内容：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#update</span><br><span class="line">  if site.data.update</span><br><span class="line">    each i in site.data.update</span><br><span class="line">      .author-content.author-content-item.UpdatePage.single(style = `background: url($&#123;i.top_background&#125;) left 37% / cover no-repeat !important;`)</span><br><span class="line">        .card-content</span><br><span class="line">          .author-content-item-tips=i.class_name</span><br><span class="line">          span.author-content-item-title=i.description</span><br><span class="line">          .content-bottom</span><br><span class="line">            .tips=i.tip</span><br><span class="line">          .banner-button-group</span><br><span class="line">            a.banner-button(href=i.buttonLink)</span><br><span class="line">              i.anzhiyufont.anzhiyu-icon-arrow-circle-right(style=&#x27;font-size: 1.3rem&#x27;)</span><br><span class="line">              span.banner-button-text=i.buttonText</span><br><span class="line"></span><br><span class="line">  #article-container</span><br><span class="line">    != page.content</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">hexo clean; hexo g; hexo s</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;p&gt;在&lt;code&gt;_config.anzhiyu.yml&lt;/code&gt;下的&lt;code&gt;menu:&lt;/code&gt;添加&lt;/p&gt;
&lt;figur</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="日志" scheme="https://blog.667408.xyz/tags/%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>添加一个统计页面</title>
    <link href="https://blog.667408.xyz/posts/263c605d.html"/>
    <id>https://blog.667408.xyz/posts/263c605d.html</id>
    <published>2024-10-28T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>新建一个分类</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page charts</span><br></pre></td></tr></table></figure><ul><li>前往博客根目录下<code>source/charts/index.md</code>，直接替换全部内容：</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">统计</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;charts&quot;</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">aside:</span> <span class="literal">false</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="string">&lt;script</span> <span class="string">src=&quot;https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&lt;!--</span> <span class="string">文章发布时间统计图</span> <span class="string">--&gt;</span> <span class="string">&lt;!--</span> <span class="number">2024-09</span><span class="string">是从2024年9月开始计算</span> <span class="string">--&gt;</span></span><br><span class="line"><span class="string">&lt;div</span> <span class="string">id=&quot;posts-chart&quot;</span> <span class="string">data-start=&quot;2024-09&quot;</span> <span class="string">style=&quot;border-radius:</span> <span class="string">8px;</span> <span class="attr">height:</span> <span class="string">300px;</span> <span class="attr">padding:</span> <span class="string">10px;&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;!--</span> <span class="string">文章标签统计图</span> <span class="string">--&gt;</span> <span class="string">&lt;!--</span> <span class="string">data-length=&quot;10&quot;</span> <span class="string">是显示的标签数量</span> <span class="string">--&gt;</span></span><br><span class="line"><span class="string">&lt;div</span> <span class="string">id=&quot;tags-chart&quot;</span> <span class="string">data-length=&quot;10&quot;</span> <span class="string">style=&quot;border-radius:</span> <span class="string">8px;</span> <span class="attr">height:</span> <span class="string">300px;</span> <span class="attr">padding:</span> <span class="string">10px;&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;!--</span> <span class="string">文章分类统计图</span> <span class="string">--&gt;</span></span><br><span class="line"><span class="string">&lt;div</span> <span class="string">id=&quot;categories-chart&quot;</span> <span class="string">data-parent=&quot;true&quot;</span> <span class="string">style=&quot;border-radius:</span> <span class="string">8px;</span> <span class="attr">height:</span> <span class="string">300px;</span> <span class="attr">padding:</span> <span class="string">10px;&quot;&gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>主题目录<code>/themes/anzhiyu/scripts/helpers</code>下添加一个<code>charts.js</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// charts.js</span></span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>)</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="keyword">function</span> (<span class="params">locals</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> $ = cheerio.<span class="title function_">load</span>(locals)</span><br><span class="line">  <span class="keyword">const</span> post = $(<span class="string">&#x27;#posts-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> tag = $(<span class="string">&#x27;#tags-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> category = $(<span class="string">&#x27;#categories-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> htmlEncode = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> || tag.<span class="property">length</span> &gt; <span class="number">0</span> || category.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#postsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (post.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      post.<span class="title function_">after</span>(<span class="title function_">postsChart</span>(post.<span class="title function_">attr</span>(<span class="string">&#x27;data-start&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tag.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#tagsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      tag.<span class="title function_">after</span>(<span class="title function_">tagsChart</span>(tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-length&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#categoriesChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (category.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      category.<span class="title function_">after</span>(<span class="title function_">categoriesChart</span>(category.<span class="title function_">attr</span>(<span class="string">&#x27;data-parent&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (htmlEncode) &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>().<span class="title function_">replace</span>(<span class="regexp">/&amp;amp;#/g</span>, <span class="string">&#x27;&amp;#&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> locals</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">postsChart</span> (<span class="params">startMonth</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> startDate = <span class="title function_">moment</span>(startMonth || <span class="string">&#x27;2020-01&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> endDate = <span class="title function_">moment</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> monthMap = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">  <span class="keyword">const</span> dayTime = <span class="number">3600</span> * <span class="number">24</span> * <span class="number">1000</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> time = startDate; time &lt;= endDate; time += dayTime) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = <span class="title function_">moment</span>(time).<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;posts&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = post.<span class="property">date</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, monthMap.<span class="title function_">get</span>(month) + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> monthArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">keys</span>()])</span><br><span class="line">  <span class="keyword">const</span> monthValueArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">values</span>()])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;postsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var postsChart = echarts.init(document.getElementById(&#x27;posts-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var postsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章发布统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;axis&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;日期&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        boundaryGap: false,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthArr&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;line&#x27;,</span></span><br><span class="line"><span class="string">        smooth: true,</span></span><br><span class="line"><span class="string">        lineStyle: &#123;</span></span><br><span class="line"><span class="string">            width: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        showSymbol: false,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        areaStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;, &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthValueArr&#125;</span>,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    postsChart.setOption(postsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="string">      postsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    postsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if (event.componentType === &#x27;series&#x27;) window.location.href = &#x27;/archives/&#x27; + event.name.replace(&#x27;-&#x27;, &#x27;/&#x27;);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tagsChart</span> (<span class="params">len</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> tagArr = []</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;tags&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">tag</span>) &#123;</span><br><span class="line">    tagArr.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: tag.<span class="property">name</span>, <span class="attr">value</span>: tag.<span class="property">length</span>, <span class="attr">path</span>: tag.<span class="property">path</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  tagArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dataLength = <span class="title class_">Math</span>.<span class="title function_">min</span>(tagArr.<span class="property">length</span>, len) || tagArr.<span class="property">length</span></span><br><span class="line">  <span class="keyword">const</span> tagNameArr = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dataLength; i++) &#123;</span><br><span class="line">    tagNameArr.<span class="title function_">push</span>(tagArr[i].<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> tagNameArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagNameArr)</span><br><span class="line">  <span class="keyword">const</span> tagArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagArr)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;tagsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var tagsChart = echarts.init(document.getElementById(&#x27;tags-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var tagsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;Top <span class="subst">$&#123;dataLength&#125;</span> 标签统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;&#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;标签&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          interval: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagNameArrJson&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;bar&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderRadius: [5, 5, 0, 0],</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        emphasis: &#123;</span></span><br><span class="line"><span class="string">          itemStyle: &#123;</span></span><br><span class="line"><span class="string">            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">              offset: 0,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(128, 255, 195)&#x27;</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              offset: 1,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(1, 211, 255)&#x27;</span></span><br><span class="line"><span class="string">            &#125;])</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    tagsChart.setOption(tagsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="string">      tagsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    tagsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">categoriesChart</span> (<span class="params">dataParent</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> categoryArr = []</span><br><span class="line">  <span class="keyword">let</span> categoryParentFlag = <span class="literal">false</span></span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;categories&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">parent</span>) categoryParentFlag = <span class="literal">true</span></span><br><span class="line">    categoryArr.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: category.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">value</span>: category.<span class="property">length</span>,</span><br><span class="line">      <span class="attr">path</span>: category.<span class="property">path</span>,</span><br><span class="line">      <span class="attr">id</span>: category.<span class="property">_id</span>,</span><br><span class="line">      <span class="attr">parentId</span>: category.<span class="property">parent</span> || <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  categoryParentFlag = categoryParentFlag &amp;&amp; dataParent === <span class="string">&#x27;true&#x27;</span></span><br><span class="line">  categoryArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">translateListToTree</span> (<span class="params">data, parent</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> tree = []</span><br><span class="line">    <span class="keyword">let</span> temp</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[index].<span class="property">parentId</span> == parent) &#123;</span><br><span class="line">        <span class="keyword">let</span> obj = data[index];</span><br><span class="line">        temp = <span class="title function_">translateListToTree</span>(data, data[index].<span class="property">id</span>);</span><br><span class="line">        <span class="keyword">if</span> (temp.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          obj.<span class="property">children</span> = temp</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tree.<span class="title function_">indexOf</span>())</span><br><span class="line">          tree.<span class="title function_">push</span>(obj)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> tree</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> categoryNameJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123; <span class="keyword">return</span> category.<span class="property">name</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> categoryArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr)</span><br><span class="line">  <span class="keyword">const</span> categoryArrParentJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title function_">translateListToTree</span>(categoryArr, <span class="string">&#x27;0&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;categoriesChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var categoriesChart = echarts.init(document.getElementById(&#x27;categories-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var categoryParentFlag = <span class="subst">$&#123;categoryParentFlag&#125;</span></span></span><br><span class="line"><span class="string">    var categoriesOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章分类统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      legend: &#123;</span></span><br><span class="line"><span class="string">        top: &#x27;bottom&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryNameJson&#125;</span>,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;item&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: []</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    categoriesOption.series.push(</span></span><br><span class="line"><span class="string">      categoryParentFlag ?</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        nodeClick :false,</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;sunburst&#x27;,</span></span><br><span class="line"><span class="string">        radius: [&#x27;15%&#x27;, &#x27;90%&#x27;],</span></span><br><span class="line"><span class="string">        center: [&#x27;50%&#x27;, &#x27;55%&#x27;],</span></span><br><span class="line"><span class="string">        sort: &#x27;desc&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrParentJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderColor: &#x27;#fff&#x27;,</span></span><br><span class="line"><span class="string">          borderWidth: 2,</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            focus: &#x27;ancestor&#x27;,</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      :</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;pie&#x27;,</span></span><br><span class="line"><span class="string">        radius: [30, 80],</span></span><br><span class="line"><span class="string">        roseType: &#x27;area&#x27;,</span></span><br><span class="line"><span class="string">        label: &#123;</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          formatter: &#x27;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    categoriesChart.setOption(categoriesOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="string">      categoriesChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    categoriesChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h1><ul><li>在<code>_config.anzhiyu.yml</code>中引用<code>charts.js</code></li><li>搜<code>Inject</code>插入到<code>bottom</code>,注意对齐</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># 统计页面</span></span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">hexo clean; hexo g; hexo s</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;新建一个分类&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="统计" scheme="https://blog.667408.xyz/tags/%E7%BB%9F%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>给博客生成永久链接</title>
    <link href="https://blog.667408.xyz/posts/614e46f9.html"/>
    <id>https://blog.667408.xyz/posts/614e46f9.html</id>
    <published>2024-10-28T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>安装插件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>修改<code>_config.yml</code>中的对应文件</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## permalink: :year/:month/:day/:title/  </span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span>  <span class="comment">## 此处可以自己设置  </span></span><br><span class="line"><span class="comment">## abbrlink config  </span></span><br><span class="line"><span class="attr">abbrlink:</span>  </span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span>      <span class="comment">#support crc16(default) and crc32 进制  </span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span>        <span class="comment">#support dec(default) and hex  算法  </span></span><br><span class="line">  <span class="attr">drafts:</span> <span class="literal">false</span>   <span class="comment">#(true)Process draft,(false)Do not process draft. false(default)   </span></span><br><span class="line">  <span class="comment">## Generate categories from directory-tree  </span></span><br><span class="line">  <span class="comment">## depth: the max_depth of directory-tree you want to generate, should &gt; 0  </span></span><br><span class="line">  <span class="attr">auto_category:</span>  </span><br><span class="line">     <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment">#true(default)  </span></span><br><span class="line">     <span class="attr">depth:</span>        <span class="comment">#3(default)  </span></span><br><span class="line">     <span class="attr">over_write:</span> <span class="literal">false</span>   </span><br><span class="line">  <span class="attr">auto_title:</span> <span class="literal">false</span> <span class="comment">#enable auto title, it can auto fill the title by path  </span></span><br><span class="line">  <span class="attr">auto_date:</span> <span class="literal">false</span> <span class="comment">#enable auto date, it can auto fill the date by time today  </span></span><br><span class="line">  <span class="attr">force:</span> <span class="literal">false</span> <span class="comment">#enable force mode,in this mode, the plugin will ignore the cache, and calc the abbrlink for every post even it already had abbrlink.  </span></span><br><span class="line"><span class="attr">permalink_defaults:</span>  </span><br><span class="line"><span class="attr">pretty_urls:</span>  </span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks  </span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;安装插件&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="永久链接" scheme="https://blog.667408.xyz/tags/%E6%B0%B8%E4%B9%85%E9%93%BE%E6%8E%A5/"/>
    
  </entry>
  
  <entry>
    <title>友人帐换个样式</title>
    <link href="https://blog.667408.xyz/posts/936c664c.html"/>
    <id>https://blog.667408.xyz/posts/936c664c.html</id>
    <published>2024-10-27T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>主题默认：<a href="https://docs.anheyu.com/page/links.html">友人帐</a><br>如果你已经添加友情链接配置，请直接看第二步</p><h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><p>在 Hexo 博客根目录 [blog]下打开终端，输入</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="built_in">link</span></span><br></pre></td></tr></table></figure><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><p>找到 source&#x2F;link&#x2F;index.md 这个文件，修改成以下内容<br>源码放不到文章，下载解压吧，下载<a href="https://wwze.lanzoue.com/i884l2dkoive">地址</a></p><h1 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h1><p>新建文件source_data\link.yml,没有_data文件夹的话也请自己新建文件，夹带下私货</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">框架</span></span><br><span class="line">  <span class="attr">flink_style:</span> <span class="string">flexcard</span></span><br><span class="line">  <span class="attr">hundredSuffix:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://hexo.io/zh-tw/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">快速、简单且强大的网站框架</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">anzhiyu主题</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://blog.anheyu.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">生活明朗，万物可爱</span></span><br><span class="line">      <span class="attr">siteshot:</span> <span class="string">https://npm.elemecdn.com/anzhiyu-theme-static@1.1.6/img/blog.anheyu.com.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">推荐博客</span></span><br><span class="line">  <span class="attr">flink_style:</span> <span class="string">telescopic</span></span><br><span class="line">  <span class="attr">hundredSuffix:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一粒微尘</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://blog.667408.xyz</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://blog.667408.xyz/favicon.ico</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">撷光以望，纳星于瞳</span></span><br><span class="line">      <span class="attr">color:</span> <span class="string">speed</span></span><br><span class="line">      <span class="attr">tag:</span> <span class="string">博主本人</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">东方月初</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://hexo.200038.xyz/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://serv.200038.xyz/2024/09/19/040857.webp</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">东方月初，涂山红红</span></span><br><span class="line">      <span class="attr">color:</span> <span class="string">green</span></span><br><span class="line">      <span class="attr">tag:</span> <span class="string">微尘好友</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">小伙伴</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">那些人，那些事</span></span><br><span class="line">  <span class="attr">flink_style:</span> <span class="string">anzhiyu</span></span><br><span class="line">  <span class="attr">hundredSuffix:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">一粒微尘</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://blog.667408.xyz</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://blog.667408.xyz/favicon.ico</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">撷光以望，纳星于瞳</span></span><br><span class="line">      <span class="attr">color:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">tag:</span> <span class="string">荐</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">东方月初</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://hexo.200038.xyz/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://serv.200038.xyz/2024/09/19/040857.webp</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">东方月初，涂山红红</span></span><br><span class="line">      <span class="attr">color:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">tag:</span> <span class="string">荐</span></span><br></pre></td></tr></table></figure><h1 id="第四步"><a href="#第四步" class="headerlink" title="第四步"></a>第四步</h1><ul><li><p>新建文件 \source\js\kslink.js，并写入如下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leonus = &#123;</span><br><span class="line">    <span class="attr">linkCom</span>: <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> t = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.el-textarea__inner&quot;</span>);</span><br><span class="line">        <span class="string">&quot;bf&quot;</span> == e ? (t.<span class="property">value</span> = <span class="string">&quot;- name: \n  link: \n  avatar: \n  descr: &quot;</span>, t.<span class="property">value</span> += <span class="string">&quot;\n&quot;</span>, t.<span class="title function_">setSelectionRange</span>(<span class="number">15</span>, <span class="number">15</span>)) : (t.<span class="property">value</span> = <span class="string">&quot;站点名称：\n站点地址：\n头像链接：\n站点描述：&quot;</span>, t.<span class="title function_">setSelectionRange</span>(<span class="number">5</span>, <span class="number">5</span>)), t.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">owoBig</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;post-comment&quot;</span>) || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span> &lt; <span class="number">768</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">let</span> e = <span class="number">1</span>,</span><br><span class="line">            t = <span class="string">&quot;&quot;</span>,</span><br><span class="line">            o = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>),</span><br><span class="line">            n = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;body&quot;</span>);</span><br><span class="line">        o.<span class="property">id</span> = <span class="string">&quot;owo-big&quot;</span>, n.<span class="title function_">appendChild</span>(o), <span class="keyword">new</span> <span class="title class_">MutationObserver</span>((<span class="function"><span class="params">l</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> a = <span class="number">0</span>; a &lt; l.<span class="property">length</span>; a++) &#123;</span><br><span class="line">                <span class="keyword">let</span> i = l[a].<span class="property">addedNodes</span>,</span><br><span class="line">                    s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">2</span> == i.<span class="property">length</span> &amp;&amp; <span class="string">&quot;OwO-body&quot;</span> == i[<span class="number">1</span>].<span class="property">className</span>) s = i[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="number">1</span> != i.<span class="property">length</span> || <span class="string">&quot;tk-comment&quot;</span> != i[<span class="number">0</span>].<span class="property">className</span>) <span class="keyword">continue</span>;</span><br><span class="line">                    s = i[<span class="number">0</span>]</span><br><span class="line">                &#125;</span><br><span class="line">                s.<span class="property">onmouseover</span> = <span class="function"><span class="params">l</span> =&gt;</span> &#123;</span><br><span class="line">                    e &amp;&amp; (<span class="string">&quot;OwO-body&quot;</span> == s.<span class="property">className</span> &amp;&amp; <span class="string">&quot;IMG&quot;</span> == l.<span class="property">target</span>.<span class="property">tagName</span> || <span class="string">&quot;tk-owo-emotion&quot;</span> == l.<span class="property">target</span>.<span class="property">className</span>) &amp;&amp; (e = <span class="number">0</span>, t = <span class="built_in">setTimeout</span>((<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">let</span> e = <span class="number">3</span> * l.<span class="property">path</span>[<span class="number">0</span>].<span class="property">clientHeight</span>,</span><br><span class="line">                            t = <span class="number">3</span> * l.<span class="property">path</span>[<span class="number">0</span>].<span class="property">clientWidth</span>,</span><br><span class="line">                            a = l.<span class="property">x</span> - l.<span class="property">offsetX</span> - (t - l.<span class="property">path</span>[<span class="number">0</span>].<span class="property">clientWidth</span>) / <span class="number">2</span>,</span><br><span class="line">                            i = l.<span class="property">y</span> - l.<span class="property">offsetY</span>;</span><br><span class="line">                        a + t &gt; n.<span class="property">clientWidth</span> &amp;&amp; (a -= a + t - n.<span class="property">clientWidth</span> + <span class="number">10</span>), a &lt; <span class="number">0</span> &amp;&amp; (a = <span class="number">10</span>), o.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">`display:flex; height:<span class="subst">$&#123;e&#125;</span>px; width:<span class="subst">$&#123;t&#125;</span>px; left:<span class="subst">$&#123;a&#125;</span>px; top:<span class="subst">$&#123;i&#125;</span>px;`</span>, o.<span class="property">innerHTML</span> = <span class="string">`&lt;img src=&quot;<span class="subst">$&#123;l.target.src&#125;</span>&quot;&gt;`</span></span><br><span class="line">                    &#125;), <span class="number">300</span>))</span><br><span class="line">                &#125;, s.<span class="property">onmouseout</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    o.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>, e = <span class="number">1</span>, <span class="built_in">clearTimeout</span>(t)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)).<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;post-comment&quot;</span>), &#123;</span><br><span class="line">            <span class="attr">subtree</span>: !<span class="number">0</span>,</span><br><span class="line">            <span class="attr">childList</span>: !<span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>新建文件 \source\css\kslink.css，并写入如下代码，颜色可以换成你自己喜欢的：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 添加友链按钮 */</span></span><br><span class="line"><span class="comment">/* 快速填写格式 */</span></span><br><span class="line"><span class="selector-class">.addBtn</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.addBtn</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">2s</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> auto;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--global-bg);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--search-result-title);</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    touch-action: manipulation;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.fa-solid</span>, <span class="selector-class">.fas</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Font Awesome 6 Free&quot;</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">900</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.addBtn</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.3rem</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.addBtn</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--theme-color);</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="第五步（我文件里面已经加过这个了，所以不用去加了）"><a href="#第五步（我文件里面已经加过这个了，所以不用去加了）" class="headerlink" title="第五步（我文件里面已经加过这个了，所以不用去加了）"></a>第五步（我文件里面已经加过这个了，所以不用去加了）</h1><p>在你的友链页面 \source\link\index.md 对应的md文件最后，引入以上两个文件以及定义按钮元素：</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;addBtn&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;leonus.linkCom()&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-circle-plus&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span>快速申请 (默认样式)<span class="language-xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;leonus.linkCom(<span class="symbol">&amp;quot;</span>bf<span class="symbol">&amp;quot;</span>)&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-circle-plus&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span>快速申请 (Butterfly)<span class="language-xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/kslink.css&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/kslink.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">hexo clean; hexo g; hexo s</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;主题默认：&lt;a href=&quot;https://docs.anheyu.com/page/links.html&quot;&gt;友人帐&lt;/a&gt;&lt;br&gt;如果你已经添加友情链接配置，请直接看第二步&lt;/p&gt;
&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="友人帐" scheme="https://blog.667408.xyz/tags/%E5%8F%8B%E4%BA%BA%E5%B8%90/"/>
    
  </entry>
  
  <entry>
    <title>添加一个宠物挂件</title>
    <link href="https://blog.667408.xyz/posts/e79cf875.html"/>
    <id>https://blog.667408.xyz/posts/e79cf875.html</id>
    <published>2024-10-27T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="宠物挂件"><a href="#宠物挂件" class="headerlink" title="宠物挂件"></a>宠物挂件</h1><ul><li>如果是安知鱼主题，那么直接替换 <code>themes\anzhiyu\layout\includes\bbTimeList.pug文件就行了</code>，代码放下面了</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">if site.data.essay  </span><br><span class="line">  each i in site.data.essay  </span><br><span class="line">    if i.home_essay  </span><br><span class="line">      - let onclick_value = theme.pjax.enable ? `pjax.loadUrl(&quot;/essay/&quot;);` : &#x27;&#x27;;  </span><br><span class="line">      - let href_value = theme.pjax.enable ? &#x27;javascript:void(0);&#x27; : `/essay/`;  </span><br><span class="line">      #bbTimeList.bbTimeList.container  </span><br><span class="line">          i.anzhiyufont.anzhiyu-icon-jike.bber-logo.fontbold(onclick=onclick_value, title=&quot;即刻短文&quot;, href=href_value, aria-hidden=&quot;true&quot;)  </span><br><span class="line">          #bbtalk.swiper-container.swiper-no-swiping.essay_bar_swiper_container(tabindex=&quot;-1&quot;)  </span><br><span class="line">            #bber-talk.swiper-wrapper(onclick=onclick_value)  </span><br><span class="line">              each i in site.data.essay  </span><br><span class="line">                each item, index in i.essay_list  </span><br><span class="line">                  if index &lt; 10  </span><br><span class="line">                    - var contentText = item.image ? item.content + &#x27; [图片]&#x27; : (item.video ? item.content + &#x27; [视频]&#x27; : item.content)  </span><br><span class="line">                    a.li-style.swiper-slide(href=href_value)= contentText  </span><br><span class="line">          a.bber-gotobb.anzhiyufont.anzhiyu-icon-circle-arrow-right(onclick=onclick_value, href=href_value, title=&quot;查看全文&quot;)  </span><br><span class="line">          img.con-animals.entered.loaded(id=&quot;new-con-animals&quot; src=&quot;&quot;)  </span><br><span class="line">      script(src=url_for(theme.home_top.swiper.swiper_js))  </span><br><span class="line">  </span><br><span class="line">style.  </span><br><span class="line">  #bbTimeList &#123;  </span><br><span class="line">    position: relative;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  .con-animals &#123;  </span><br><span class="line">    display: block;  </span><br><span class="line">    position: absolute;  </span><br><span class="line">    max-width: 260px;  </span><br><span class="line">    top: -85px;  </span><br><span class="line">    z-index: 2;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  @media screen and (max-width: 1200px) &#123;  </span><br><span class="line">    .con-animals &#123;  </span><br><span class="line">      display: none;  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">script.  </span><br><span class="line">  // 将lastImageUrl移到全局作用域  </span><br><span class="line">  window.lastImageUrl = window.lastImageUrl || &#x27;&#x27;;  </span><br><span class="line">  </span><br><span class="line">  function setRandomImage() &#123;  </span><br><span class="line">    const img = document.getElementById(&#x27;new-con-animals&#x27;);  </span><br><span class="line">    const imageUrls = [  </span><br><span class="line">      &quot;https://i1.wp.com/ruom.wuaze.com/i/2024/10/18/901216.webp&quot;,  </span><br><span class="line">      &quot;https://i1.wp.com/ruom.wuaze.com/i/2024/10/18/074167.webp&quot;,  </span><br><span class="line">      &quot;https://i1.wp.com/ruom.wuaze.com/i/2024/10/19/759434.webp&quot;,  </span><br><span class="line">      &quot;https://i1.wp.com/ruom.wuaze.com/i/2024/10/19/526748.webp&quot;,  </span><br><span class="line">      &quot;https://i1.wp.com/ruom.wuaze.com/i/2024/10/18/429029.webp&quot;  </span><br><span class="line">    ];  </span><br><span class="line">  </span><br><span class="line">    let randomImage;  </span><br><span class="line">    do &#123;  </span><br><span class="line">      randomImage = imageUrls[Math.floor(Math.random() * imageUrls.length)];  </span><br><span class="line">    &#125; while (randomImage === window.lastImageUrl);  </span><br><span class="line">  </span><br><span class="line">    window.lastImageUrl = randomImage;  </span><br><span class="line">  </span><br><span class="line">    if (img) &#123;  </span><br><span class="line">      img.src = randomImage;  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  function initializeDragImage() &#123;  </span><br><span class="line">    const img = document.getElementById(&#x27;new-con-animals&#x27;);  </span><br><span class="line">    const container = document.getElementById(&#x27;bbTimeList&#x27;);  </span><br><span class="line">  </span><br><span class="line">    if (!img || !container) return;  </span><br><span class="line">  </span><br><span class="line">    if (!window.lastImageUrl) &#123;  </span><br><span class="line">      setRandomImage();  </span><br><span class="line">    &#125; else &#123;  </span><br><span class="line">      img.src = window.lastImageUrl;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    let isDragging = false, wasDragged = false, startX, startLeft;  </span><br><span class="line">    const containerWidth = container.clientWidth;  </span><br><span class="line">    const imgWidth = img.clientWidth;  </span><br><span class="line">    const maxLeft = containerWidth - imgWidth;  </span><br><span class="line">    const edgeThreshold = 20;  </span><br><span class="line">    let lastLeft = parseInt(localStorage.getItem(&#x27;imgPositionLeft&#x27;)) || 0;  </span><br><span class="line">    lastLeft = Math.min(maxLeft, Math.max(0, lastLeft));  </span><br><span class="line">    img.style.left = `$&#123;lastLeft&#125;px`;  </span><br><span class="line">  </span><br><span class="line">    const savePosition = (left) =&gt; localStorage.setItem(&#x27;imgPositionLeft&#x27;, left);  </span><br><span class="line">  </span><br><span class="line">    img.addEventListener(&#x27;click&#x27;, () =&gt; &#123;  </span><br><span class="line">      if (!wasDragged) &#123;  </span><br><span class="line">        let currentLeft = lastLeft;  </span><br><span class="line">        let newLeft;  </span><br><span class="line">  </span><br><span class="line">        if (currentLeft &lt;= edgeThreshold) &#123;  </span><br><span class="line">          newLeft = Math.min(currentLeft + 200, maxLeft);  </span><br><span class="line">        &#125; else if (currentLeft &gt;= maxLeft - edgeThreshold) &#123;  </span><br><span class="line">          newLeft = Math.max(currentLeft - 200, 0);  </span><br><span class="line">        &#125; else &#123;  </span><br><span class="line">          newLeft = currentLeft + (Math.random() &lt; 0.5 ? -200 : 200);  </span><br><span class="line">          newLeft = Math.max(0, Math.min(newLeft, maxLeft));  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        if (newLeft !== lastLeft) &#123;  </span><br><span class="line">          lastLeft = newLeft;  </span><br><span class="line">          img.style.left = `$&#123;newLeft&#125;px`;  </span><br><span class="line">          savePosition(newLeft);  </span><br><span class="line">        &#125;  </span><br><span class="line">      &#125;  </span><br><span class="line">    &#125;);  </span><br><span class="line">  </span><br><span class="line">    img.addEventListener(&#x27;mousedown&#x27;, (e) =&gt; &#123;  </span><br><span class="line">      isDragging = true;  </span><br><span class="line">      wasDragged = false;  </span><br><span class="line">      startX = e.clientX;  </span><br><span class="line">      startLeft = lastLeft;  </span><br><span class="line">      img.style.transition = &#x27;none&#x27;;  </span><br><span class="line">  </span><br><span class="line">      const onMouseMove = (e) =&gt; &#123;  </span><br><span class="line">        if (!isDragging) return;  </span><br><span class="line">        wasDragged = true;  </span><br><span class="line">        const offsetX = e.clientX - startX;  </span><br><span class="line">        lastLeft = Math.max(0, Math.min(startLeft + offsetX, maxLeft));  </span><br><span class="line">        requestAnimationFrame(() =&gt; &#123;  </span><br><span class="line">          img.style.left = `$&#123;lastLeft&#125;px`;  </span><br><span class="line">        &#125;);  </span><br><span class="line">      &#125;;  </span><br><span class="line">  </span><br><span class="line">      const onMouseUp = () =&gt; &#123;  </span><br><span class="line">        isDragging = false;  </span><br><span class="line">        img.style.transition = &#x27;left 0.5s ease-in-out&#x27;;  </span><br><span class="line">        savePosition(lastLeft);  </span><br><span class="line">        document.removeEventListener(&#x27;mousemove&#x27;, onMouseMove);  </span><br><span class="line">        document.removeEventListener(&#x27;mouseup&#x27;, onMouseUp);  </span><br><span class="line">      &#125;;  </span><br><span class="line">  </span><br><span class="line">      document.addEventListener(&#x27;mousemove&#x27;, onMouseMove);  </span><br><span class="line">      document.addEventListener(&#x27;mouseup&#x27;, onMouseUp);  </span><br><span class="line">    &#125;);  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  document.addEventListener(&#x27;DOMContentLoaded&#x27;, initializeDragImage);  </span><br><span class="line">  document.addEventListener(&#x27;pjax:success&#x27;, initializeDragImage);</span><br></pre></td></tr></table></figure><ul><li>如果你发现夜间模式会被遮挡一部分可以添加下这段 css 试试，暂且不知道会不会影响其它部分</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/* 小动物夜间显示优化 */  </span><br><span class="line">[data-theme=&#x27;dark&#x27;] #page-header.nav-fixed #nav &#123;  </span><br><span class="line">    background: var(--anzhiyu-black)!important;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">[data-theme=&#x27;dark&#x27;] #page-header #nav &#123;  </span><br><span class="line">    background: 0 !important;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="页脚挂件"><a href="#页脚挂件" class="headerlink" title="页脚挂件"></a>页脚挂件</h1><p>挂件基于青桔气球的教程进行修改，适配安知鱼主题。只需在主题中引入以下 <code>JavaScript</code> 代码，即可在页脚动态插入一个动物挂件。<br>需要开启 主题配置文件中的 footer_bar 选项，设置为 true</p><ul><li>在 source\js 文件中新建一个 <code>footer-animal.js</code> 文件，将以下代码粘贴进去。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">function initFooterAnimal() &#123;  </span><br><span class="line">    const footerBar = document.querySelector(&#x27;#footer-bar&#x27;);  </span><br><span class="line">    if (!footerBar) return console.error(&#x27;找不到指定元素&#x27;);  </span><br><span class="line">  </span><br><span class="line">    const footerAnimal = document.createElement(&#x27;div&#x27;);  </span><br><span class="line">    footerAnimal.id = &#x27;footer-animal&#x27;;  </span><br><span class="line">    footerAnimal.innerHTML = `  </span><br><span class="line">        &lt;img class=&quot;animal entered loaded&quot;  </span><br><span class="line">            src=&quot;https://i1.wp.com/ruom.wuaze.com/i/2024/10/19/473503.webp&quot;  </span><br><span class="line">            alt=&quot;动物&quot; /&gt;  </span><br><span class="line">    `;  </span><br><span class="line">      </span><br><span class="line">    footerBar.insertAdjacentElement(&#x27;beforebegin&#x27;, footerAnimal);  </span><br><span class="line">  </span><br><span class="line">    const style = document.createElement(&#x27;style&#x27;);  </span><br><span class="line">    style.textContent = `  </span><br><span class="line">        #footer-animal &#123;  </span><br><span class="line">            position: relative;  </span><br><span class="line">        &#125;  </span><br><span class="line">        #footer-animal::before &#123;  </span><br><span class="line">            content: &#x27;&#x27;;  </span><br><span class="line">            position: absolute;  </span><br><span class="line">            bottom: 0;  </span><br><span class="line">            width: 100%;  </span><br><span class="line">            height: 36px;  </span><br><span class="line">            background: url(https://i1.wp.com/ruom.wuaze.com/i/2024/10/19/351933.webp) repeat center / auto 100%;  </span><br><span class="line">            box-shadow: 0 4px 7px rgba(0,0,0,.15);  </span><br><span class="line">        &#125;  </span><br><span class="line">        .animal &#123;  </span><br><span class="line">            position: relative;  </span><br><span class="line">            max-width: min(974px, 100vw);  </span><br><span class="line">            margin: 0 auto;  </span><br><span class="line">            display: block;  </span><br><span class="line">        &#125;  </span><br><span class="line">        #footer-bar &#123;  </span><br><span class="line">            margin-top: 0 !important;  </span><br><span class="line">        &#125;  </span><br><span class="line">        @media screen and (max-width: 1023px) &#123;  </span><br><span class="line">            #footer-animal::before &#123;  </span><br><span class="line">                height: 4vw;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">        [data-theme=dark] #footer-animal &#123;  </span><br><span class="line">            filter: brightness(.8);  </span><br><span class="line">        &#125;  </span><br><span class="line">    `;  </span><br><span class="line">    document.head.appendChild(style);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">document.addEventListener(&#x27;DOMContentLoaded&#x27;, initFooterAnimal);  </span><br><span class="line">document.addEventListener(&#x27;pjax:success&#x27;, initFooterAnimal);</span><br></pre></td></tr></table></figure><ul><li>然后在 _config.anzhiyu.yml 中 inject 选项的 bottom 中引用该 js</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- &lt;script src=&quot;/js/footer-animal.js&quot; defer&gt;&lt;/script&gt; # 页脚小动物</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;宠物挂件&quot;&gt;&lt;a href=&quot;#宠物挂件&quot; class=&quot;headerlink&quot; title=&quot;宠物挂件&quot;&gt;&lt;/a&gt;宠物挂件&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;如果是安知鱼主题，那么直接替换 &lt;code&gt;themes&#92;anzhiyu&#92;layout&#92;includes&#92;bbT</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="宠物挂件" scheme="https://blog.667408.xyz/tags/%E5%AE%A0%E7%89%A9%E6%8C%82%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>添加一个来访者信息</title>
    <link href="https://blog.667408.xyz/posts/2370fd62.html"/>
    <id>https://blog.667408.xyz/posts/2370fd62.html</id>
    <published>2024-10-07T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img.667408.xyz/2024/11/02/789040.webp" alt="789040.webp"></p><h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><p>打开 <a href="https://blog.667408.xyz/go.html?url=aHR0cHM6Ly9sYnMucXEuY29tL2Rldi9jb25zb2xlL2FwcGxpY2F0aW9uL21pbmU=">腾讯位置</a> 服务，登录你的账号  </p><ul><li>点击创建应用，填一下名称和类型，随意即可  </li><li>点击添加 <code>Key</code> 名称随意，勾选 <code>WebServiceAPI</code>，此处白名单建议填域名和 <code>localhost:4000</code></li><li>记录得到的 <code>Key</code></li><li>建议在 <code>配额管理</code> 中的 <code>账户额度</code> 里面，<code>IP 定位</code> 分配拉满</li></ul><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>在 <code>_config.anzhiyu.yml</code> 主题配置文件下 inject 配置项中的 <code>bottom</code> 引入 <code>jquery.min.js</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inject:  </span><br><span class="line">  </span><br><span class="line">  bottom:  </span><br><span class="line">    - &lt;script type=&quot;text/javascript&quot; src=&quot;https://unpkg.zhimg.com/jquery@latest/dist/jquery.min.js&quot;&gt;&lt;/script&gt; # jquery.min.js</span><br></pre></td></tr></table></figure><ul><li>新建 <code>source/js/welcome.js</code> 文件，新增以下内容 (若没有 js 文件夹直接新建即可)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line">//get请求  </span><br><span class="line">$.ajax(&#123;  </span><br><span class="line">    type: &#x27;get&#x27;,  </span><br><span class="line">    url: &#x27;https://apis.map.qq.com/ws/location/v1/ip&#x27;,  </span><br><span class="line">    data: &#123;  </span><br><span class="line">        key: &#x27;你刚刚获取到的Key&#x27;,  </span><br><span class="line">        output: &#x27;jsonp&#x27;,  </span><br><span class="line">    &#125;,  </span><br><span class="line">    dataType: &#x27;jsonp&#x27;,  </span><br><span class="line">    success: function (res) &#123;  </span><br><span class="line">        ipLocation = res;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;)  </span><br><span class="line">function getDistance(e1, n1, e2, n2) &#123;  </span><br><span class="line">    const R = 6371  </span><br><span class="line">    const &#123; sin, cos, asin, PI, hypot &#125; = Math  </span><br><span class="line">    let getPoint = (e, n) =&gt; &#123;  </span><br><span class="line">        e *= PI / 180  </span><br><span class="line">        n *= PI / 180  </span><br><span class="line">        return &#123; x: cos(n) * cos(e), y: cos(n) * sin(e), z: sin(n) &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    let a = getPoint(e1, n1)  </span><br><span class="line">    let b = getPoint(e2, n2)  </span><br><span class="line">    let c = hypot(a.x - b.x, a.y - b.y, a.z - b.z)  </span><br><span class="line">    let r = asin(c / 2) * 2 * R  </span><br><span class="line">    return Math.round(r);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">function showWelcome() &#123;  </span><br><span class="line">  </span><br><span class="line">    let dist = getDistance(114.21416, 22.576264, ipLocation.result.location.lng, ipLocation.result.location.lat); //这里记得换成自己的经纬度  </span><br><span class="line">    let pos = ipLocation.result.ad_info.nation;  </span><br><span class="line">    let ip;  </span><br><span class="line">    let posdesc;  </span><br><span class="line">    //根据国家、省份、城市信息自定义欢迎语  </span><br><span class="line">    switch (ipLocation.result.ad_info.nation) &#123;  </span><br><span class="line">        case &quot;日本&quot;:  </span><br><span class="line">            posdesc = &quot;よろしく，一起去看樱花吗&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">        case &quot;美国&quot;:  </span><br><span class="line">            posdesc = &quot;Let us live in peace!&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">        case &quot;英国&quot;:  </span><br><span class="line">            posdesc = &quot;想同你一起夜乘伦敦眼&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">        case &quot;俄罗斯&quot;:  </span><br><span class="line">            posdesc = &quot;干了这瓶伏特加！&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">        case &quot;法国&quot;:  </span><br><span class="line">            posdesc = &quot;C&#x27;est La Vie&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">        case &quot;德国&quot;:  </span><br><span class="line">            posdesc = &quot;Die Zeit verging im Fluge.&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">        case &quot;澳大利亚&quot;:  </span><br><span class="line">            posdesc = &quot;一起去大堡礁吧！&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">        case &quot;加拿大&quot;:  </span><br><span class="line">            posdesc = &quot;拾起一片枫叶赠予你&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">        case &quot;中国&quot;:  </span><br><span class="line">            pos = ipLocation.result.ad_info.province + &quot; &quot; + ipLocation.result.ad_info.city + &quot; &quot; + ipLocation.result.ad_info.district;  </span><br><span class="line">            ip = ipLocation.result.ip;  </span><br><span class="line">            switch (ipLocation.result.ad_info.province) &#123;  </span><br><span class="line">                case &quot;北京市&quot;:  </span><br><span class="line">                    posdesc = &quot;北——京——欢迎你~~~&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;天津市&quot;:  </span><br><span class="line">                    posdesc = &quot;讲段相声吧&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;河北省&quot;:  </span><br><span class="line">                    posdesc = &quot;山势巍巍成壁垒，天下雄关铁马金戈由此向，无限江山&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;山西省&quot;:  </span><br><span class="line">                    posdesc = &quot;展开坐具长三尺，已占山河五百余&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;内蒙古自治区&quot;:  </span><br><span class="line">                    posdesc = &quot;天苍苍，野茫茫，风吹草低见牛羊&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;辽宁省&quot;:  </span><br><span class="line">                    posdesc = &quot;我想吃烤鸡架！&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;吉林省&quot;:  </span><br><span class="line">                    posdesc = &quot;状元阁就是东北烧烤之王&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;黑龙江省&quot;:  </span><br><span class="line">                    posdesc = &quot;很喜欢哈尔滨大剧院&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;上海市&quot;:  </span><br><span class="line">                    posdesc = &quot;众所周知，中国只有两个城市&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;江苏省&quot;:  </span><br><span class="line">                    switch (ipLocation.result.ad_info.city) &#123;  </span><br><span class="line">                        case &quot;南京市&quot;:  </span><br><span class="line">                            posdesc = &quot;这是我挺想去的城市啦&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        case &quot;苏州市&quot;:  </span><br><span class="line">                            posdesc = &quot;上有天堂，下有苏杭&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        default:  </span><br><span class="line">                            posdesc = &quot;散装是必须要散装的&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                    &#125;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;浙江省&quot;:  </span><br><span class="line">                    posdesc = &quot;东风渐绿西湖柳，雁已还人未南归&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;河南省&quot;:  </span><br><span class="line">                    switch (ipLocation.result.ad_info.city) &#123;  </span><br><span class="line">                        case &quot;郑州市&quot;:  </span><br><span class="line">                            posdesc = &quot;豫州之域，天地之中&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        case &quot;南阳市&quot;:  </span><br><span class="line">                            posdesc = &quot;臣本布衣，躬耕于南阳此南阳非彼南阳！&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        case &quot;驻马店市&quot;:  </span><br><span class="line">                            posdesc = &quot;峰峰有奇石，石石挟仙气嵖岈山的花很美哦！&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        case &quot;开封市&quot;:  </span><br><span class="line">                            posdesc = &quot;刚正不阿包青天&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        case &quot;洛阳市&quot;:  </span><br><span class="line">                            posdesc = &quot;洛阳牡丹甲天下&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        default:  </span><br><span class="line">                            posdesc = &quot;可否带我品尝河南烩面啦？&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                    &#125;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;安徽省&quot;:  </span><br><span class="line">                    posdesc = &quot;蚌埠住了，芜湖起飞&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;福建省&quot;:  </span><br><span class="line">                    posdesc = &quot;井邑白云间，岩城远带山&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;江西省&quot;:  </span><br><span class="line">                    posdesc = &quot;落霞与孤鹜齐飞，秋水共长天一色&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;山东省&quot;:  </span><br><span class="line">                    posdesc = &quot;遥望齐州九点烟，一泓海水杯中泻&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;湖北省&quot;:  </span><br><span class="line">                    switch (ipLocation.result.ad_info.city) &#123;  </span><br><span class="line">                        case &quot;黄冈市&quot;:  </span><br><span class="line">                            posdesc = &quot;红安将军县！辈出将才！&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        default:  </span><br><span class="line">                            posdesc = &quot;来碗热干面~&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                    &#125;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;湖南省&quot;:  </span><br><span class="line">                    posdesc = &quot;74751，长沙斯塔克&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;广东省&quot;:  </span><br><span class="line">                    switch (ipLocation.result.ad_info.city) &#123;  </span><br><span class="line">                        case &quot;广州市&quot;:  </span><br><span class="line">                            posdesc = &quot;看小蛮腰，喝早茶了嘛~&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        case &quot;深圳市&quot;:  </span><br><span class="line">                            posdesc = &quot;今天你逛商场了嘛~&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        case &quot;阳江市&quot;:  </span><br><span class="line">                            posdesc = &quot;阳春合水！博主家乡~ 欢迎来玩~&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                        default:  </span><br><span class="line">                            posdesc = &quot;来两斤福建人~&quot;;  </span><br><span class="line">                            break;  </span><br><span class="line">                    &#125;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;广西壮族自治区&quot;:  </span><br><span class="line">                    posdesc = &quot;桂林山水甲天下&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;海南省&quot;:  </span><br><span class="line">                    posdesc = &quot;朝观日出逐白浪，夕看云起收霞光&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;四川省&quot;:  </span><br><span class="line">                    posdesc = &quot;康康川妹子&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;贵州省&quot;:  </span><br><span class="line">                    posdesc = &quot;茅台，学生，再塞200&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;云南省&quot;:  </span><br><span class="line">                    posdesc = &quot;玉龙飞舞云缠绕，万仞冰川直耸天&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;西藏自治区&quot;:  </span><br><span class="line">                    posdesc = &quot;躺在茫茫草原上，仰望蓝天&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;陕西省&quot;:  </span><br><span class="line">                    posdesc = &quot;来份臊子面加馍&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;甘肃省&quot;:  </span><br><span class="line">                    posdesc = &quot;羌笛何须怨杨柳，春风不度玉门关&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;青海省&quot;:  </span><br><span class="line">                    posdesc = &quot;牛肉干和老酸奶都好好吃&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;宁夏回族自治区&quot;:  </span><br><span class="line">                    posdesc = &quot;大漠孤烟直，长河落日圆&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;新疆维吾尔自治区&quot;:  </span><br><span class="line">                    posdesc = &quot;驼铃古道丝绸路，胡马犹闻唐汉风&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;台湾省&quot;:  </span><br><span class="line">                    posdesc = &quot;我在这头，大陆在那头&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;香港特别行政区&quot;:  </span><br><span class="line">                    posdesc = &quot;永定贼有残留地鬼嚎，迎击光非岁玉&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                case &quot;澳门特别行政区&quot;:  </span><br><span class="line">                    posdesc = &quot;性感荷官，在线发牌&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">                default:  </span><br><span class="line">                    posdesc = &quot;带我去你的城市逛逛吧！&quot;;  </span><br><span class="line">                    break;  </span><br><span class="line">            &#125;  </span><br><span class="line">            break;  </span><br><span class="line">        default:  </span><br><span class="line">            posdesc = &quot;带我去你的国家逛逛吧&quot;;  </span><br><span class="line">            break;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    //根据本地时间切换欢迎语  </span><br><span class="line">    let timeChange;  </span><br><span class="line">    let date = new Date();  </span><br><span class="line">    if (date.getHours() &gt;= 5 &amp;&amp; date.getHours() &lt; 11) timeChange = &quot;&lt;span&gt;🌤️ 早上好，一日之计在于晨&lt;/span&gt;&quot;;  </span><br><span class="line">    else if (date.getHours() &gt;= 11 &amp;&amp; date.getHours() &lt; 13) timeChange = &quot;&lt;span&gt;☀️ 中午好，记得午休喔~&lt;/span&gt;&quot;;  </span><br><span class="line">    else if (date.getHours() &gt;= 13 &amp;&amp; date.getHours() &lt; 17) timeChange = &quot;&lt;span&gt;🕞 下午好，饮茶先啦！&lt;/span&gt;&quot;;  </span><br><span class="line">    else if (date.getHours() &gt;= 17 &amp;&amp; date.getHours() &lt; 19) timeChange = &quot;&lt;span&gt;🚶‍♂️ 即将下班，记得按时吃饭~&lt;/span&gt;&quot;;  </span><br><span class="line">    else if (date.getHours() &gt;= 19 &amp;&amp; date.getHours() &lt; 24) timeChange = &quot;&lt;span&gt;🌙 晚上好，夜生活嗨起来！&lt;/span&gt;&quot;;  </span><br><span class="line">    else timeChange = &quot;夜深了，早点休息，少熬夜&quot;;  </span><br><span class="line">  </span><br><span class="line">// 新增ipv6显示为指定内容  </span><br><span class="line">    if (ip.includes(&quot;:&quot;)) &#123;  </span><br><span class="line">        ip = &quot;&lt;br&gt;好复杂，咱看不懂~(ipv6)&quot;;  </span><br><span class="line">    &#125;  </span><br><span class="line">    try &#123;  </span><br><span class="line">        //自定义文本和需要放的位置  </span><br><span class="line">        document.getElementById(&quot;welcome-info&quot;).innerHTML =  </span><br><span class="line">            `欢迎来自 &lt;b&gt;&lt;span style=&quot;color: var(--kouseki-ip-color);font-size: var(--kouseki-gl-size)&quot;&gt;$&#123;pos&#125;&lt;/span&gt;&lt;/b&gt; 的小友💖&lt;br&gt;$&#123;posdesc&#125;🍂&lt;br&gt;当前位置距博主约 &lt;b&gt;&lt;span style=&quot;color: var(--kouseki-ip-color)&quot;&gt;$&#123;dist&#125;&lt;/span&gt;&lt;/b&gt; 公里！&lt;br&gt;您的IP地址为：&lt;b&gt;&lt;span&gt;$&#123;ip&#125;&lt;/span&gt;&lt;/b&gt;&lt;br&gt;$&#123;timeChange&#125; &lt;br&gt;`;  </span><br><span class="line">    &#125; catch (err) &#123;  </span><br><span class="line">         console.log(&quot;Pjax无法获取元素&quot;)  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">window.onload = showWelcome;  </span><br><span class="line">// 如果使用了pjax在加上下面这行代码  </span><br><span class="line">document.addEventListener(&#x27;pjax:complete&#x27;, showWelcome);</span><br></pre></td></tr></table></figure><ul><li>在 <code>第6行</code> 及 <code>第32行</code> 分别填入自己的 <code>Key</code> 和 <code>经纬度</code></li><li>在 <code>_config.anzhiyu.yml</code> 主题配置文件下 <code>inject</code> 配置项中的 <code>bottom</code> 引入 <code>welcome.js</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inject:  </span><br><span class="line">  </span><br><span class="line">  bottom:  </span><br><span class="line">    - &lt;script defer=&quot;true&quot; src=&quot;/js/welcome.js&quot;&gt;&lt;/script&gt; # 个性定位欢迎信息</span><br></pre></td></tr></table></figure><ul><li>新建 <code>source/css/welcome.css</code> 文件，新增以下内容 (若没有 css 文件夹直接新建即可)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#welcome-info &#123;  </span><br><span class="line">    overflow: hidden;  </span><br><span class="line">    border-radius: 14px;  </span><br><span class="line">    --kouseki-welcome-color: #49B1F5;  </span><br><span class="line">    --kouseki-ip-color: #49B1F5;  </span><br><span class="line">    --kouseki-gl-size: 16px!important;  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li>在 <code>_config.anzhiyu.yml</code> 主题配置文件下 <code>inject</code> 配置项中的 <code>head</code> 引入 <code>welcome.css</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inject:  </span><br><span class="line">  </span><br><span class="line">  head:  </span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/welcome.css?1&quot;&gt;</span><br></pre></td></tr></table></figure><ul><li>在 <code>_config.anzhiyu.yml</code> 主题配置文件下 <code>aside</code> 配置项中添加以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">card_announcement:  </span><br><span class="line">  enable: true  </span><br><span class="line">  content: &lt;div id=&quot;welcome-info&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">hexo clean; hexo g; hexo s</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img.667408.xyz/2024/11/02/789040.webp&quot; alt=&quot;789040.webp&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="侧边栏" scheme="https://blog.667408.xyz/tags/%E4%BE%A7%E8%BE%B9%E6%A0%8F/"/>
    
    <category term="个性定位" scheme="https://blog.667408.xyz/tags/%E4%B8%AA%E6%80%A7%E5%AE%9A%E4%BD%8D/"/>
    
  </entry>
  
  <entry>
    <title>使用 GitHub Actions 实现博客自动化部署1.0</title>
    <link href="https://blog.667408.xyz/posts/c6ad5cda.html"/>
    <id>https://blog.667408.xyz/posts/c6ad5cda.html</id>
    <published>2024-10-06T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>偷个懒，先把 <a href="https://blog.cmliussss.com/p/HexoBlogNo1/">杨幂的脚</a> 博客内容看到第 5 步结束，第 6 步 <code>不要</code> 挂载到 <code>Cloudflare Pages</code>，这里开始不一样了<br><img src="https://img.667408.xyz/2024/11/02/180204.webp" alt="180204.webp"></li><li>先把这部分 <code>复原</code></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">anzhiyu</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>继续在 <code>VSCode</code> 终端上输入命令,在博客根目录里安装最新版主题</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b main https://github.com/anzhiyu-c/hexo-theme-anzhiyu.git themes/anzhiyu</span><br></pre></td></tr></table></figure><ul><li>第一次使用需要安装 pug 以及 stylus 的渲染器</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><ul><li>如果你是 windows 系统就请手动将&#x2F;themes&#x2F;anzhiyu&#x2F;_config.yml 复制到根目录下并重命名为 _config.anzhiyu.yml 即可。</li><li>以后如果修改任何主题配置，都只需修改 _config.anzhiyu.yml 的配置即可。</li></ul><h2 id="注意：-简单点就是动外面的这个-config-anzhiyu-yml，别去碰里面那份"><a href="#注意：-简单点就是动外面的这个-config-anzhiyu-yml，别去碰里面那份" class="headerlink" title="注意：(简单点就是动外面的这个 _config.anzhiyu.yml，别去碰里面那份)"></a>注意：(简单点就是动外面的这个 _config.anzhiyu.yml，别去碰里面那份)</h2><ul><li>只要存在于 <code>_config.anzhiyu.yml</code> 的配置都是高优先级，修改原 <code>_config.yml</code> 是无效的。</li><li>每次更新主题可能存在配置变更，请注意更新说明，可能需要手动对 <code>_config.anzhiyu.yml</code> 同步修改。</li><li>想查看覆盖配置有没有生效，可以通过 <code>hexo g --debug</code> 查看命令行输出。</li><li>如果想将某些配置覆盖为空，注意不要把主键删掉，不然是无法覆盖的</li></ul><h2 id="VSCODE-终端首次执行报错"><a href="#VSCODE-终端首次执行报错" class="headerlink" title="VSCODE 终端首次执行报错"></a>VSCODE 终端首次执行报错</h2><ul><li>使用管理员身份打开 <code>powershell</code> ,输入以下命令</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-ExecutionPolicy</span> RemoteSigned</span><br></pre></td></tr></table></figure><hr><h1 id="2-到这里就开始转换策略"><a href="#2-到这里就开始转换策略" class="headerlink" title="2.到这里就开始转换策略"></a>2.到这里就开始转换策略</h1><ul><li>修改开始部署的 Github 仓库名称，任意都行，反正不能是 <code>&lt;用户名&gt;.github.io</code>,举个例子：<code>blog-demo</code><br><img src="https://img.667408.xyz/2024/11/02/400898.webp" alt="400898.webp">  </li><li>在本地新建 txt,修改其中的内容，然后把文件改成 <code>push_blog.sh</code> 保存 (不要乱改名字)</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义本地和远程仓库名称</span></span><br><span class="line">LOCAL_REPO=<span class="string">&quot;blog-demo&quot;</span>  <span class="comment">#本地博客的文件夹名</span></span><br><span class="line">GIT_REPO=<span class="string">&quot;git@github.com:用户名/仓库名.git&quot;</span>  <span class="comment"># 替换为你自己的用户名和仓库名</span></span><br><span class="line">GIT_EMAIL=<span class="string">&quot;邮箱&quot;</span>   <span class="comment"># 替换为你自己仓库账号的邮箱</span></span><br><span class="line">GIT_USER=<span class="string">&quot;用户名&quot;</span>  <span class="comment"># 替换为你自己仓库账号的用户名</span></span><br><span class="line">PUSH_REMAKE=<span class="string">&quot;由 git bash 自动提交&quot;</span></span><br><span class="line">THEME_URL=<span class="string">&quot;https://github.com/anzhiyu-c/hexo-theme-anzhiyu.git&quot;</span> <span class="comment"># 安知鱼主题子模块 URL</span></span><br><span class="line"><span class="comment"># ---------------------------以下内容无需修改-----------------------------</span></span><br><span class="line"></span><br><span class="line">git config --global core.autocrlf <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;检查 SSH 配置...&quot;</span></span><br><span class="line">SSH_OUTPUT=$(ssh -T git@github.com 2&gt;&amp;1)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$SSH_OUTPUT</span>&quot;</span> | grep -q <span class="string">&#x27;success&#x27;</span>; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;SSH 配置正确，连接 GitHub 成功&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;错误：SSH 配置不正确，请确保 SSH 密钥已设置，并添加到 GitHub&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$LOCAL_REPO</span>&quot;</span> || &#123; <span class="built_in">echo</span> <span class="string">&quot;目录 <span class="variable">$LOCAL_REPO</span> 不存在，脚本即将退出。&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="string">&quot;.git&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    git init</span><br><span class="line">    git remote add origin <span class="string">&quot;<span class="variable">$GIT_REPO</span>&quot;</span></span><br><span class="line">    git config --global user.email <span class="string">&quot;<span class="variable">$GIT_EMAIL</span>&quot;</span></span><br><span class="line">    git config --global user.name <span class="string">&quot;<span class="variable">$GIT_USER</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;已初始化新的 Git 仓库并设置远程仓库&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;themes/anzhiyu/.git&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    git <span class="built_in">rm</span> -r --cached themes/anzhiyu</span><br><span class="line">    <span class="built_in">rm</span> -rf themes/anzhiyu/.git</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;已移除嵌套的 Git 仓库：themes/anzhiyu&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="string">&quot;themes/anzhiyu&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    git submodule add <span class="string">&quot;<span class="variable">$THEME_URL</span>&quot;</span> themes/anzhiyu</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;已添加子模块：<span class="variable">$THEME_URL</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;子模块已存在，更新子模块&quot;</span></span><br><span class="line">    git submodule update --init --recursive themes/anzhiyu</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">git checkout -B main</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;已切换到 &#x27;main&#x27; 分支&quot;</span></span><br><span class="line">git add .</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;已将所有文件添加到暂存区&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ! git diff --cached --quiet; <span class="keyword">then</span>  <span class="comment"># 仅在有更改时提交</span></span><br><span class="line">    git commit -m <span class="string">&quot;<span class="variable">$PUSH_REMAKE</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;已提交更改&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;没有更改需要提交&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">git pull origin main --rebase</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;已拉取远程更改并合并&quot;</span></span><br><span class="line">git push -u origin main</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;已将本地更改推送到远程仓库&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;操作完成！&quot;</span></span><br></pre></td></tr></table></figure><ul><li>再新建一个 txt,修改内容保存之后，起名 <code>run.bat</code>(不要乱改名字)</li></ul><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">&quot;C:\Program Files\Git\bin\bash.exe&quot; -c &quot;./push_blog.sh&quot;</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><ul><li><p>都弄好之后以管理员身份运行 <code>run.bat</code>,下图这样就是成功了<br><img src="https://img.667408.xyz/2024/11/02/786783.webp" alt="786783.webp"></p></li><li><p>现在可以部署到 Cloudflare 了  </p></li><li><p>新建 <code>pages</code>,链接 github,选择博客仓库，这里需要 <code>填写构建信息</code> (别填错了),填好之后点击部署<br><img src="https://img.667408.xyz/2024/11/02/300910.webp" alt="300910.webp"></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public</span><br></pre></td></tr></table></figure><hr><h1 id="3-接下来需要下载-Github-桌面端，认识英文可以不装汉化"><a href="#3-接下来需要下载-Github-桌面端，认识英文可以不装汉化" class="headerlink" title="3.接下来需要下载 Github 桌面端，认识英文可以不装汉化"></a>3.接下来需要下载 Github 桌面端，认识英文可以不装汉化</h1><p><a href="https://desktop.github.com/download/">giuhub桌面端</a><br><a href="https://github.com/robotze/GithubDesktopZhTool">github汉化</a></p><ul><li>登录你的 github 账号，点击文件，选择克隆存储库，选择你心仪的文件夹保存，打开 VSCode 修改你的博客信息</li><li>后续当你在 VSCode 改好之后，返回 github 桌面端,按顺序点击就可以完整的推送到你的仓库<br><img src="https://img.667408.xyz/2024/11/02/888282.webp" alt="888282.webp"><br><img src="https://img.667408.xyz/2024/11/02/297469.webp" alt="297469.webp">  </li><li>VSCode 预览命令，要用这个哦，推送直接用 github</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><hr><h1 id="后话"><a href="#后话" class="headerlink" title="后话"></a>后话</h1><p>当你电脑损坏或者换地方编辑很简单，只需要装上 giuhub 桌面端，再次克隆仓库到本地文件夹</p><ul><li><a href="https://nodejs.org/en">Node</a>(必须)</li><li><a href="https://git-scm.com/downloads">Git</a>(必须)</li><li><a href="https://code.visualstudio.com/">VSCode</a>(非必须)，但是这个好用，当然你会别的也行</li></ul><p>第一次预览之前需要安装依赖</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i</span><br></pre></td></tr></table></figure><blockquote><p>这里再次感谢青云志大佬提供的方案，让我的博客不会丢失了<br><a href="https://blog.811520.xyz/post/2024/10/anzhiyu-hexo-cf/">搭建 hexo 博客 + 安知鱼主题，直接部署到 CF Pages，实现在 git 里写文章后直接发布 | 青云志</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;偷个懒，先把 &lt;a href=&quot;https://blog.cmliussss.com/p/HexoBlogNo1/&quot;&gt;杨</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="Github" scheme="https://blog.667408.xyz/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>LX Music（洛雪音乐）</title>
    <link href="https://blog.667408.xyz/posts/8ea7504b.html"/>
    <id>https://blog.667408.xyz/posts/8ea7504b.html</id>
    <published>2024-10-01T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>LX Music<a href="https://lxmusic.toside.cn/">官网</a></p><ul><li>可以在设置中的基础设置下拉网络导入音源使用。<br><img src="https://img.667408.xyz/2024/11/02/306126.webp" alt="306126.webp"><br><img src="https://img.667408.xyz/2024/11/02/118113.webp" alt="118113.webp"></li></ul><hr><h1 id="音源"><a href="#音源" class="headerlink" title="音源"></a>音源</h1><ul><li>fish_musicv</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://m-api.ceseet.me/script</span><br></pre></td></tr></table></figure><ul><li>Huibg_Ixmusic 源</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.niuma666bet.buzz/Huibq/keep-alive/master/render_api.js</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h1&gt;&lt;p&gt;LX Music&lt;a href=&quot;https://lxmusic.toside.cn/&quot;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可以在设置</summary>
      
    
    
    
    <category term="软件" scheme="https://blog.667408.xyz/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="音源" scheme="https://blog.667408.xyz/tags/%E9%9F%B3%E6%BA%90/"/>
    
    <category term="洛雪音乐" scheme="https://blog.667408.xyz/tags/%E6%B4%9B%E9%9B%AA%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>添加一个追番页面</title>
    <link href="https://blog.667408.xyz/posts/e3ca322b.html"/>
    <id>https://blog.667408.xyz/posts/e3ca322b.html</id>
    <published>2024-09-27T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>终端执行插件安装</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-bilibili-bangumi --save</span><br></pre></td></tr></table></figure><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>在配置文件 <code>_config.yml</code> 中加入以下配置，注意不是主题配置文件</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 追番插件  </span><br><span class="line"># https://github.com/HCLonely/hexo-bilibili-bangumi  </span><br><span class="line">bangumi: # 追番设置  </span><br><span class="line">  enable: true  </span><br><span class="line">  source: bili  </span><br><span class="line">  path:  </span><br><span class="line">  vmid: B站uid←这里  </span><br><span class="line">  title: &quot;追番列表&quot;  </span><br><span class="line">  quote: &quot;生命不息，追番不止！&quot;  </span><br><span class="line">  show: 1  </span><br><span class="line">  lazyload: false  </span><br><span class="line">  loading:  </span><br><span class="line">  showMyComment: false  </span><br><span class="line">  pagination: false  </span><br><span class="line">  metaColor:  </span><br><span class="line">  color:  </span><br><span class="line">  webp:  </span><br><span class="line">  progress:  </span><br><span class="line">  extraOrder:  </span><br><span class="line">  proxy:  </span><br><span class="line">    host: &quot;代理host&quot;  </span><br><span class="line">    port: &quot;代理端口&quot;  </span><br><span class="line">  extra_options:  </span><br><span class="line">    top_img: false  </span><br><span class="line">    lazyload:  </span><br><span class="line">      enable: false</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;终端执行插件安装&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;tab</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="追番集" scheme="https://blog.667408.xyz/tags/%E8%BF%BD%E7%95%AA%E9%9B%86/"/>
    
  </entry>
  
  <entry>
    <title>添加卡片擦亮动画效果</title>
    <link href="https://blog.667408.xyz/posts/7208a5f5.html"/>
    <id>https://blog.667408.xyz/posts/7208a5f5.html</id>
    <published>2024-09-26T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>注意：本文操作步骤为 <code>anzhiyu</code> 主题，其他主题可以自行尝试,该方法通过外部引入，无需修改主题源文件  </p><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ul><li>新建文件 <code>source/css/home.css</code> 或在已引入的 <code>css</code> 中新增以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#recent-posts &gt; .recent-post-item:not(a)::before &#123;  </span><br><span class="line">  content: &quot;&quot;;  </span><br><span class="line">  position: absolute;  </span><br><span class="line">  top: 0;  </span><br><span class="line">  left: 0;  </span><br><span class="line">  width: 100%;  </span><br><span class="line">  height: 200%;  </span><br><span class="line">  background: linear-gradient(to right, transparent, white, transparent);  </span><br><span class="line">  transform: translateX(-200%);  </span><br><span class="line">  transition: transform 0.5s linear;  </span><br><span class="line">  z-index: 1;  </span><br><span class="line">&#125;  </span><br><span class="line">#recent-posts &gt; .recent-post-item:not(a):hover::before &#123;  </span><br><span class="line">  transform: translateX(100%) skewX(-60deg);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在 <code>_config.anzhiyu.yml</code> 主题配置文件下 <code>inject</code> 配置项中 <code>head</code> 处引入 <code>home.css</code> 文件</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:  </span><br><span class="line">  head:  </span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/home.css&quot;&gt; # 首页文章卡片擦亮效果</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;注意：本文操作步骤为 &lt;code&gt;anzhiyu&lt;/code&gt; 主题，其他主题可以自行尝试,该方法通过外部引入，无需修改主题源文件  &lt;/p&gt;
&lt;h1 id=&quot;实现步骤&quot;&gt;&lt;a href=&quot;#实现步骤&quot; class=&quot;headerlink&quot; title=&quot;实现步骤&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
  </entry>
  
  <entry>
    <title>添加一个待办清单页</title>
    <link href="https://blog.667408.xyz/posts/b47abf66.html"/>
    <id>https://blog.667408.xyz/posts/b47abf66.html</id>
    <published>2024-09-24T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>注意：该内容需要修改主题文件  </p><h1 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h1><ul><li>在 <code>\themes\anzhiyu\layout\page.pug</code> 中新增以下内容,记得删除 +</li><li>注意 pug 格式对齐</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;music&#x27;  </span><br><span class="line">        include includes/page/music.pug  </span><br><span class="line">+     when &#x27;todolist&#x27;  </span><br><span class="line">+       include includes/page/todolist.pug  </span><br><span class="line">      default  </span><br><span class="line">        include includes/page/default-page.pug</span><br></pre></td></tr></table></figure><hr><h1 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h1><ul><li>在 <code>\themes\anzhiyu\layout\includes\page\</code> 中新建文件 <code>todolist.pug</code> 并增加以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#todolist-box  </span><br><span class="line">    - let todo_background = page.top_background  </span><br><span class="line">    .author-content.author-content-item.todolist.single(style=`$&#123;todo_background ? `background: url($&#123;todo_background&#125;) top / cover no-repeat;` : &quot;&quot;&#125;`)  </span><br><span class="line">        .card-content  </span><br><span class="line">            .author-content-item-tips Todo  </span><br><span class="line">            span.author-content-item-title 待办清单  </span><br><span class="line">            .content-bottom  </span><br><span class="line">            .tips 耽误太多时间，事情可就做不完了  </span><br><span class="line">            .banner-button-group  </span><br><span class="line">              a.banner-button(onclick=&#x27;pjax.loadUrl(&quot;/about/&quot;)&#x27;)  </span><br><span class="line">                i.anzhiyufont.anzhiyu-icon-arrow-circle-right(style=&#x27;font-size: 1.5rem&#x27;)  </span><br><span class="line">                span.banner-button-text 我的更多  </span><br><span class="line">    #todolist-main  </span><br><span class="line">        #todolist-left  </span><br><span class="line">            each i in site.data.todolist  </span><br><span class="line">                if i.seat == &#x27;left&#x27;  </span><br><span class="line">                    .todolist-item  </span><br><span class="line">                        h3.todolist-title=i.class_name  </span><br><span class="line">                        ul.todolist-ul  </span><br><span class="line">                            each item in i.todo_list  </span><br><span class="line">                                 - var listItemClass = item.completed ? &#x27;todolist-li-done&#x27; : &#x27;todolist-li&#x27;  </span><br><span class="line">                                 li(class=listItemClass)  </span><br><span class="line">                                    if item.completed  </span><br><span class="line">                                        i.fa-regular.fa-circle-check  </span><br><span class="line">                                    else   </span><br><span class="line">                                        i.fa-regular.fa-circle  </span><br><span class="line">                                    span=item.content  </span><br><span class="line">        #todolist-right  </span><br><span class="line">            each i in site.data.todolist  </span><br><span class="line">                if i.seat == &#x27;right&#x27;  </span><br><span class="line">                    .todolist-item  </span><br><span class="line">                        h3.todolist-title=i.class_name  </span><br><span class="line">                        ul.todolist-ul  </span><br><span class="line">                            each item in i.todo_list  </span><br><span class="line">                                 - var listItemClass = item.completed ? &#x27;todolist-li-done&#x27; : &#x27;todolist-li&#x27;  </span><br><span class="line">                                 li(class=listItemClass)  </span><br><span class="line">                                    if item.completed  </span><br><span class="line">                                        i.fa-regular.fa-circle-check  </span><br><span class="line">                                    else   </span><br><span class="line">                                        i.fa-regular.fa-circle  </span><br><span class="line">                                    span=item.content</span><br></pre></td></tr></table></figure><ul><li>新建 <code>\source\_data\todolist.yml</code> 并参考以下格式输入内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># seat控制清单在左栏还是右栏显示，completed控制是否已完成  </span><br><span class="line">- class_name: 想做的项目  </span><br><span class="line">  seat: left  </span><br><span class="line">  todo_list:  </span><br><span class="line">    - content: 主页  </span><br><span class="line">      completed: false  </span><br><span class="line">    - content: 小程序  </span><br><span class="line">      completed: false  </span><br><span class="line">  </span><br><span class="line">- class_name: 想看的书  </span><br><span class="line">  seat: left  </span><br><span class="line">  todo_list:  </span><br><span class="line">    - content: 《骆驼祥子》  </span><br><span class="line">      completed: false  </span><br><span class="line">    - content: 《活着》  </span><br><span class="line">      completed: false  </span><br><span class="line">  </span><br><span class="line">- class_name: 想买的东西  </span><br><span class="line">  seat: left  </span><br><span class="line">  todo_list:  </span><br><span class="line">    - content: 东西  </span><br><span class="line">      completed: true  </span><br><span class="line">    - content: 机械硬盘盒  </span><br><span class="line">      completed: true  </span><br><span class="line">  </span><br><span class="line">- class_name: 想学的技术  </span><br><span class="line">  seat: right  </span><br><span class="line">  todo_list:  </span><br><span class="line">    - content: 骑自行车  </span><br><span class="line">      completed: false  </span><br><span class="line">    - content: 修自行车  </span><br><span class="line">      completed: false  </span><br><span class="line">  </span><br><span class="line">- class_name: 想去的地方  </span><br><span class="line">  seat: right  </span><br><span class="line">  todo_list:  </span><br><span class="line">    - content: 桂林  </span><br><span class="line">      completed: true  </span><br><span class="line">    - content: 心里  </span><br><span class="line">      completed: false</span><br></pre></td></tr></table></figure><ul><li>新建文件 <code>\source\todolist\index.md</code> 并按以下格式填写</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---  </span><br><span class="line">title: todolist  </span><br><span class="line">date: 2023-06-18 14:07:13  </span><br><span class="line">type: todolist  </span><br><span class="line">top_background:   </span><br><span class="line">---</span><br></pre></td></tr></table></figure><hr><h1 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h1><ul><li>新建文件 <code>\source\css\todolist.css</code> 或在已引入的 css 中新增以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">body[data-type=&quot;todolist&quot;] #web_bg &#123;  </span><br><span class="line">  background: var(--anzhiyu-background);  </span><br><span class="line">&#125;  </span><br><span class="line">body[data-type=&quot;todolist&quot;] #page &#123;  </span><br><span class="line">  border: 0;  </span><br><span class="line">  -webkit-box-shadow: none !important;  </span><br><span class="line">  box-shadow: none !important;  </span><br><span class="line">  padding: 0 !important;  </span><br><span class="line">  background: 0 0 !important;  </span><br><span class="line">&#125;  </span><br><span class="line">body[data-type=&quot;todolist&quot;] #page .page-title &#123;  </span><br><span class="line">  display: none;  </span><br><span class="line">&#125;  </span><br><span class="line">/* Todolist */  </span><br><span class="line">#todolist-box&#123;  </span><br><span class="line">  margin: 0 10px;  </span><br><span class="line">&#125;  </span><br><span class="line">#todolist-main&#123;  </span><br><span class="line">  display: flex;  </span><br><span class="line">  flex-direction: row;  </span><br><span class="line">  flex-wrap: wrap;  </span><br><span class="line">  justify-content: center;  </span><br><span class="line">  margin: 16px 0 10px;  </span><br><span class="line">&#125;  </span><br><span class="line">#todolist-main li&#123;  </span><br><span class="line">  list-style:none;  </span><br><span class="line">  font-size: 17px;  </span><br><span class="line">&#125;  </span><br><span class="line">#todolist-main ul&#123;  </span><br><span class="line">  margin: 0;  </span><br><span class="line">  padding: 0;  </span><br><span class="line">&#125;  </span><br><span class="line">#todolist-left&#123;  </span><br><span class="line">  width: 50%;  </span><br><span class="line">  padding: 0 8px 0 0;  </span><br><span class="line">&#125;  </span><br><span class="line">#todolist-right&#123;  </span><br><span class="line">  width: 50%;  </span><br><span class="line">  padding: 0 0 0 8px;  </span><br><span class="line">&#125;  </span><br><span class="line">.todolist-item&#123;  </span><br><span class="line">  position: relative;  </span><br><span class="line">  background: #fae4df;  </span><br><span class="line">  border-radius: 12px;  </span><br><span class="line">  padding: 10px 1rem 1.2rem;  </span><br><span class="line">  border: 2px dashed #f7a796;  </span><br><span class="line">  margin-bottom: 1rem;  </span><br><span class="line">&#125;  </span><br><span class="line">[data-theme=dark]  </span><br><span class="line">.todolist-item&#123;  </span><br><span class="line">  background: #242424;  </span><br><span class="line">  border: 2px dashed #51908b;  </span><br><span class="line">&#125;  </span><br><span class="line">li.todolist-li i&#123;  </span><br><span class="line">  margin-left: 10px;  </span><br><span class="line">&#125;  </span><br><span class="line">h3.todolist-title&#123;  </span><br><span class="line">  margin: 0!important;  </span><br><span class="line">  border-bottom: var(--todo-border);  </span><br><span class="line">&#125;  </span><br><span class="line">li.todolist-li&#123;  </span><br><span class="line">  border-bottom: var(--todo-border);  </span><br><span class="line">  font-weight: normal;  </span><br><span class="line">  margin-left: -10px;  </span><br><span class="line">&#125;  </span><br><span class="line">li.todolist-li-done&#123;  </span><br><span class="line">  border-bottom: var(--todo-border);  </span><br><span class="line">  font-weight: normal;  </span><br><span class="line">  text-decoration: line-through;  </span><br><span class="line">&#125;  </span><br><span class="line">.todolist-li span&#123;  </span><br><span class="line">  margin-left: 5px;  </span><br><span class="line">&#125;  </span><br><span class="line">.todolist-li-done span&#123;  </span><br><span class="line">  margin-left: 5px;  </span><br><span class="line">&#125;  </span><br><span class="line">@media screen and (max-width:700px)&#123;  </span><br><span class="line">  #todolist-left,#todolist-right&#123;  </span><br><span class="line">      width: 100%;  </span><br><span class="line">      padding: 0;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在 <code>_config.anzhiyu.yml</code> 主题配置文件下 <code>inject</code> 配置项中 <code>head</code> 处引入 <code>todolist.css</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:  </span><br><span class="line">  head:  </span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/todolist.css&quot;&gt; # 待办清单页</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;注意：该内容需要修改主题文件  &lt;/p&gt;
&lt;h1 id=&quot;第一步&quot;&gt;&lt;a href=&quot;#第一步&quot; class=&quot;headerlink&quot; title=&quot;第一步&quot;&gt;&lt;/a&gt;第一步&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;在 &lt;code&gt;&#92;themes&#92;anzhiyu&#92;layout&#92;page.</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="待办清单" scheme="https://blog.667408.xyz/tags/%E5%BE%85%E5%8A%9E%E6%B8%85%E5%8D%95/"/>
    
  </entry>
  
  <entry>
    <title>添加一个游戏收藏页</title>
    <link href="https://blog.667408.xyz/posts/a4d0465e.html"/>
    <id>https://blog.667408.xyz/posts/a4d0465e.html</id>
    <published>2024-09-23T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>注意：该内容需修改主题文件  </p><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ul><li>在 <code>\themes\anzhiyu\layout\page.pug</code> 中新增以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;music&#x27;  </span><br><span class="line">        include includes/page/music.pug  </span><br><span class="line">+     when &#x27;games&#x27;  </span><br><span class="line">+       include includes/page/games.pug  </span><br><span class="line">      default  </span><br><span class="line">        include includes/page/default-page.pug</span><br></pre></td></tr></table></figure><ul><li>在 <code>\themes\anzhiyu\layout\includes\page\</code> 中新建文件 <code>games.pug</code> 并增加以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#games  </span><br><span class="line">  if site.data.games  </span><br><span class="line">    each i in site.data.games  </span><br><span class="line">      .author-content.author-content-item.GamesPage.single(style = `background: url($&#123;i.top_background&#125;) left 37% / cover no-repeat !important;`)  </span><br><span class="line">        .card-content  </span><br><span class="line">          .author-content-item-tips=i.class_name  </span><br><span class="line">          span.author-content-item-title=i.description  </span><br><span class="line">          .content-bottom  </span><br><span class="line">            .tips=i.tip  </span><br><span class="line">          .banner-button-group  </span><br><span class="line">            a.banner-button(href=i.buttonLink)  </span><br><span class="line">              i.anzhiyufont.anzhiyu-icon-arrow-circle-right(style=&#x27;font-size: 1.3rem&#x27;)  </span><br><span class="line">              span.banner-button-text=i.buttonText  </span><br><span class="line">      each item in i.good_games  </span><br><span class="line">        .goodgames-item  </span><br><span class="line">          h2.goodgames-title= item.title  </span><br><span class="line">          .goodgames-item-description= item.description  </span><br><span class="line">          .games-item  </span><br><span class="line">            .games-item-content  </span><br><span class="line">              each iten, indey in item.games_list  </span><br><span class="line">                .games-item-content-item  </span><br><span class="line">                  .games-item-content-item-cover  </span><br><span class="line">                    img.games-item-content-item-image(data-lazy-src=url_for(iten.image) onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.flink) + `&#x27;` alt=iten.name)  </span><br><span class="line">                  .games-item-content-item-info  </span><br><span class="line">                    .games-item-content-item-name(onclick=`rm.rightmenuCopyText(&quot;$&#123;iten.name&#125;&quot;);anzhiyu.snackbarShow(&quot;$&#123;_p(&#x27;Snackbar.copy_games_name&#x27;) + &quot; 【&quot; + iten.name + &quot;】&quot;&#125;&quot;);` title=iten.name)= iten.name  </span><br><span class="line">                    .games-item-content-item-specification= iten.specification  </span><br><span class="line">                    .games-item-content-item-description= iten.description  </span><br><span class="line">                    .games-item-content-item-toolbar  </span><br><span class="line">                      if iten.link.includes(&#x27;https://&#x27;) || iten.link.includes(&#x27;http://&#x27;)  </span><br><span class="line">                        a.games-item-content-item-link(href= iten.link, target=&#x27;_blank&#x27;) 详情  </span><br><span class="line">                        .bber-reply(onclick=&quot;rm.rightMenuCommentText(&quot; + `&#x27;$&#123;iten.name + &quot; &quot; + iten.specification + &quot; &quot; + iten.description&#125;&#x27;` + &quot;)&quot;)  </span><br><span class="line">                          i.anzhiyufont.anzhiyu-icon-message  </span><br><span class="line">                      else    </span><br><span class="line">                        a.games-item-content-item-link(href= iten.link, target=&#x27;_blank&#x27;) 查看文章  </span><br><span class="line">                        .bber-reply(onclick=&quot;rm.rightMenuCommentText(&quot; + `&#x27;$&#123;iten.name + &quot; &quot; + iten.specification + &quot; &quot; + iten.description&#125;&#x27;` + &quot;)&quot;)  </span><br><span class="line">                          i.anzhiyufont.anzhiyu-icon-message</span><br></pre></td></tr></table></figure><ul><li>新建 <code>\source\_data\games.yml</code> 并参考以下格式输入内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">- class_name: 游戏世界  </span><br><span class="line">  description: 我的游戏世界  </span><br><span class="line">  tip: 跟 石头 一起探索世界  </span><br><span class="line">  top_background: https://th.bing.com/th/id/R.13a97ef4830efa5e0b87134d622719f3?rik=G7RaJFpxg5PtkA&amp;riu=http%3a%2f%2fupload.techweb.com.cn%2fs%2f640%2f2019%2f0530%2f1559208230699.jpg&amp;ehk=j1G8rMX98TRX52EkLgI5jW1p7lIQp4I8Si1nqEggFRs%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0&amp;sres=1&amp;sresct=1  </span><br><span class="line">  buttonText: Steam  </span><br><span class="line">  buttonLink: https://steamcommunity.com/  </span><br><span class="line">  good_games:  </span><br><span class="line">    - title: 风景一绝  </span><br><span class="line">      description: 不会错过的风景  </span><br><span class="line">      games_list:  </span><br><span class="line">        - name: 怪物猎人：世界  </span><br><span class="line">          specification: CAPCOM Co., Ltd.  </span><br><span class="line">          description: &quot;在新建构的「Monster Hunter: World」中, 可以体验到你一直期盼的极致猎人生活。&quot;  </span><br><span class="line">          image: https://cdn.max-c.com/heybox/dailynews/img/94376ca41326836587a137d5999733e5.jpg  </span><br><span class="line">          link: https://www.xiaoheihe.cn/games/detail/582010  </span><br><span class="line">  </span><br><span class="line">    - title: 我的最爱  </span><br><span class="line">      description: 我不能没有它了  </span><br><span class="line">      games_list:  </span><br><span class="line">        - name: GTA:5  </span><br><span class="line">          specification: Rockstar Games  </span><br><span class="line">          description: 谁还在买GTA5  </span><br><span class="line">          image: https://imgheybox.max-c.com/heybox/game/header/271590_dXCCk.jpg  </span><br><span class="line">          link: https://www.xiaoheihe.cn/games/detail/271590</span><br></pre></td></tr></table></figure><ul><li>新建文件 <code>\source\games\index.md</code> 并按以下格式填写</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---  </span><br><span class="line">title: 游戏世界  </span><br><span class="line">date: 2023-05-07 21:07:54  </span><br><span class="line">type: games  </span><br><span class="line">aside: false  </span><br><span class="line">comments: true  </span><br><span class="line">---</span><br></pre></td></tr></table></figure><ul><li>在 <code>\themes\anzhiyu\source\css\_page\</code> 中新建文件 <code>games.styl</code> 并增加以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">// 游戏世界  </span><br><span class="line">.goodgames-title  </span><br><span class="line">  margin: 1rem 0  </span><br><span class="line">  line-height: 1;  </span><br><span class="line">.games-item  </span><br><span class="line">  .games-item-content  </span><br><span class="line">    display: flex  </span><br><span class="line">    flex-direction: row  </span><br><span class="line">    flex-wrap: wrap  </span><br><span class="line">    margin: 0 -8px  </span><br><span class="line">    .games-item-content-item  </span><br><span class="line">      width: calc(25% - 12px)  </span><br><span class="line">      border-radius: 12px  </span><br><span class="line">      border: var(--style-border-always)  </span><br><span class="line">      overflow: hidden  </span><br><span class="line">      margin: 8px 6px  </span><br><span class="line">      background: var(--anzhiyu-card-bg)  </span><br><span class="line">      box-shadow: var(--anzhiyu-shadow-border)  </span><br><span class="line">      min-height: 400px  </span><br><span class="line">      position: relative  </span><br><span class="line">      +maxWidth1200()  </span><br><span class="line">        width: calc(50% - 12px)  </span><br><span class="line">      +maxWidth768()  </span><br><span class="line">        width: 100%  </span><br><span class="line">        </span><br><span class="line">      .games-item-content-item-info  </span><br><span class="line">        padding: 8px 16px 16px 16px  </span><br><span class="line">        margin-top: 12px  </span><br><span class="line">  </span><br><span class="line">      .games-item-content-item-name  </span><br><span class="line">        font-size: 18px  </span><br><span class="line">        font-weight: bold  </span><br><span class="line">        line-height: 1  </span><br><span class="line">        margin-bottom: 8px  </span><br><span class="line">        white-space: nowrap  </span><br><span class="line">        overflow: visable  </span><br><span class="line">        text-overflow: ellipsis  </span><br><span class="line">        width: fit-content  </span><br><span class="line">        cursor pointer  </span><br><span class="line">        &amp;:hover  </span><br><span class="line">          color: var(--anzhiyu-main)  </span><br><span class="line">  </span><br><span class="line">      .games-item-content-item-specification  </span><br><span class="line">        font-size: 12px  </span><br><span class="line">        color: var(--anzhiyu-secondtext)  </span><br><span class="line">        line-height: 16px  </span><br><span class="line">        margin-bottom: 5px  </span><br><span class="line">        white-space: nowrap  </span><br><span class="line">        overflow: hidden  </span><br><span class="line">        text-overflow: ellipsis  </span><br><span class="line">  </span><br><span class="line">      .games-item-content-item-description  </span><br><span class="line">        line-height: 20px  </span><br><span class="line">        color: var(--anzhiyu-secondtext)  </span><br><span class="line">        height: 60px  </span><br><span class="line">        display: -webkit-box  </span><br><span class="line">        overflow: hidden  </span><br><span class="line">        -webkit-line-clamp: 3  </span><br><span class="line">        -webkit-box-orient: vertical  </span><br><span class="line">        font-size: 14px  </span><br><span class="line">  </span><br><span class="line">      a.games-item-content-item-link  </span><br><span class="line">        font-size: 12px  </span><br><span class="line">        background: var(--anzhiyu-gray-op)  </span><br><span class="line">        padding: 4px 8px  </span><br><span class="line">        border-radius: 8px  </span><br><span class="line">        cursor: pointer  </span><br><span class="line">  </span><br><span class="line">        &amp;:hover  </span><br><span class="line">          background: var(--anzhiyu-main)  </span><br><span class="line">          color: var(--anzhiyu-white)  </span><br><span class="line">  </span><br><span class="line">      .games-item-content-item-cover  </span><br><span class="line">        width: 100%  </span><br><span class="line">        height: 200px  </span><br><span class="line">        background: var(--anzhiyu-secondbg)  </span><br><span class="line">        display: flex  </span><br><span class="line">        justify-content: center  </span><br><span class="line">        align-items: center;  </span><br><span class="line">  </span><br><span class="line">      img.games-item-content-item-image  </span><br><span class="line">        object-fit: cover  </span><br><span class="line">        height: 100%  </span><br><span class="line">        width: 100%  </span><br><span class="line">       // border-radius: 0   </span><br><span class="line">       // 若需要去除图片圆角可以将这里的注释去掉  </span><br><span class="line">  </span><br><span class="line">      .games-item-content-item-toolbar  </span><br><span class="line">        display: flex  </span><br><span class="line">        justify-content: space-between  </span><br><span class="line">        position: absolute  </span><br><span class="line">        bottom: 12px  </span><br><span class="line">        left: 0  </span><br><span class="line">        width: 100%  </span><br><span class="line">        padding: 0 16px  </span><br><span class="line">  </span><br><span class="line">body[data-type=&quot;games&quot;] #web_bg  </span><br><span class="line">  background: var(--anzhiyu-background);  </span><br><span class="line">body[data-type=&quot;games&quot;] #page  </span><br><span class="line">  border: 0;  </span><br><span class="line">  box-shadow: none !important;  </span><br><span class="line">  padding: 0 !important;  </span><br><span class="line">  background: 0 0 !important;  </span><br><span class="line">body[data-type=&quot;games&quot;] #page .page-title  </span><br><span class="line">  display: none;</span><br></pre></td></tr></table></figure><hr><h1 id="一键三连"><a href="#一键三连" class="headerlink" title="一键三连"></a>一键三连</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;注意：该内容需修改主题文件  &lt;/p&gt;
&lt;h1 id=&quot;实现步骤&quot;&gt;&lt;a href=&quot;#实现步骤&quot; class=&quot;headerlink&quot; title=&quot;实现步骤&quot;&gt;&lt;/a&gt;实现步骤&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;在 &lt;code&gt;&#92;themes&#92;anzhiyu&#92;layout&#92;pa</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
    <category term="魔改" scheme="https://blog.667408.xyz/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="游戏收藏" scheme="https://blog.667408.xyz/tags/%E6%B8%B8%E6%88%8F%E6%94%B6%E8%97%8F/"/>
    
  </entry>
  
  <entry>
    <title>安知鱼主题博客命令集合</title>
    <link href="https://blog.667408.xyz/posts/10d3ed16.html"/>
    <id>https://blog.667408.xyz/posts/10d3ed16.html</id>
    <published>2024-09-22T16:00:00.000Z</published>
    <updated>2024-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="新建文章和分类"><a href="#新建文章和分类" class="headerlink" title="新建文章和分类"></a>新建文章和分类</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new 文章</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page 分类</span><br></pre></td></tr></table></figure><h1 id="本地预览"><a href="#本地预览" class="headerlink" title="本地预览"></a>本地预览</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean; hexo g; hexo s</span><br></pre></td></tr></table></figure><h1 id="朋友圈更新"><a href="#朋友圈更新" class="headerlink" title="朋友圈更新"></a>朋友圈更新</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node link.js</span><br></pre></td></tr></table></figure><h1 id="安装插件和卸载"><a href="#安装插件和卸载" class="headerlink" title="安装插件和卸载"></a>安装插件和卸载</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install 插件名 --save</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall 插件名</span><br></pre></td></tr></table></figure><h1 id="更新和删除追番数据"><a href="#更新和删除追番数据" class="headerlink" title="更新和删除追番数据"></a>更新和删除追番数据</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exo bangumi -u</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo bangumi -d</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;新建文章和分类&quot;&gt;&lt;a href=&quot;#新建文章和分类&quot; class=&quot;headerlink&quot; title=&quot;新建文章和分类&quot;&gt;&lt;/a&gt;新建文章和分类&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    
    <category term="建站" scheme="https://blog.667408.xyz/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="安知鱼" scheme="https://blog.667408.xyz/tags/%E5%AE%89%E7%9F%A5%E9%B1%BC/"/>
    
    <category term="Hexo" scheme="https://blog.667408.xyz/tags/Hexo/"/>
    
  </entry>
  
</feed>
